!function(t){!function(e){var o=t.ulocale,n=t.locale;e.translateHighcharts=function(){var t="";return function(){o.currentLang!=t&&(t=o.currentLang,o.currentLang,window.Highcharts&&window.Highcharts.setOptions&&window.Highcharts.setOptions({lang:{months:n.date.months,weekdays:n.date.weekdays,shortMonths:n.date.monthsShort,decimalPoint:n.number.decimal,thousandsSep:n.number.thousand,resetZoom:n.charts.resetZoom,resetZoomTitle:n.charts.resetZoomTitle,rangeSelectorZoom:n.charts.rangeSelectorZoom,rangeSelectorFrom:n.charts.rangeSelectorFrom,rangeSelectorTo:n.charts.rangeSelectorTo}}))}}()}(t.ui||(t.ui={}))}(Phoenix||(Phoenix={}));var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){t(e,o);function n(){this.constructor=e}e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();!function(t){!function(e){var o=t.utils,n=(t.dom,t.locale,t.$mem,t.link,e),r=t.customData,i=t.render,a=function(){function t(t,e,o,n,r){t=t||{},this.formData=n||{$create:!0},this.options=t,this.layout=e,this.schema=o,this.module=r}return t.prototype.render=function(t){var e=this;if(!e.$element){var o={replaceParent:e.options.replaceParent,context:e.options.context,beforeAdd:e.options.beforeAdd,beforeRemove:e.options.beforeRemove,beforeSetModel:e.options.beforeSetModel,afterModelCreated:e.options.afterModelCreated,settingsHandler:e.options.onSettings,storageName:e.options.storageName,validators:e.options.validators,module:e.module},r=e.module&&e.module.data&&e.module.data.data&&e.module.data.data.ds&&e.module.data.data.ds.view?e.module.data.data.ds.view.$view:null;n.OpenForm(t,e.layout,e.schema,e.formData||{},r,e.action,o,function(t){e.form=t,e.$element=e.form.$element})}},t.prototype.destroy=function(){this.form&&(this.form.destroy(),this.form=null),this.$element=null},t}();e.FormContainer=a,i.register("javascript","widget.content.control.form",a);var s=function(t){__extends(n,t);function n(n,i,a,s,l){var c=this;if(!i)throw"Form name is empty.";if(!a)throw"Meta name (schema) is empty.";if(!s)throw"Controller name is empty.";var u=r.get(s);if(!u)throw o.format('Controller not found "{0}". Use customData.register(controllerName, ctrlConfig).',s);e.formController2Options(n,u);var d=u.data?u.data():null;return c=t.call(this,n,i,a,d,l)||this,u.isFormController?c.action=u.modelChanged.bind(u):u.onModelChanged&&(c.action=u.onModelChanged.bind(u)),c}return n}(a);e.FormContainerController=s}(t.ui||(t.ui={}))}(Phoenix||(Phoenix={}));!function(t){!function(e){var o=t.ulocale,n=t.utils,r=t.ajax,i=t.render,a=function(t,e,n){var r="money"==n.valueType,i=new window.google.visualization.DataTable;t.titles=t.titles||{},t.rows=t.rows||[],i.addColumn("string",t.cols[0].label),i.addColumn("number",t.titles.seriesTitle||"");for(var a=[],s=1,l=t.cols.length;s<l;s++){for(var c=[t.cols[s].label,{v:0,f:""}],u=0,d=t.rows.length;u<d;u++){var p=t.rows[u][s];p&&(c[1].v+="object"==typeof p?p.value:p)}c[1].v=parseFloat(c[1].v.toFixed(6)),r&&(c[1].f=o.money(c[1].v,!0)),a.push(c)}return i.addRows(a),n.colors&&(e.slices={},n.colors.forEach(function(t,o){e.slices[o]={color:t}})),i},s=function(t,e,n){var r="money"==n.valueType,i=new window.google.google.visualization.DataTable,a=[];t.titles=t.titles||{},t.rows=t.rows||[];for(var s=0,l=t.cols.length;s<l;s++)i.addColumn(s?"number":"string",t.cols[s].label);for(var c=0,u=t.rows.length;c<u;c++){var d=new Array(t.cols.length);for(s=0,l=t.cols.length;s<l;s++){var p=t.rows[c][s];0==s?d[s]="object"==typeof p?p.value:p:(d[s]={v:"object"==typeof p?p.value:p},r&&(d[s].f=o.money(d[s].v,!0)))}a.push(d)}return e.colors=n.colors,i.addRows(a),i},l=function(){function t(t){this.options=t||{},this.props={},this.data={},this.chartId=n.allocID(),this._defineProps()}return t.prototype._defineProps=function(){var t=n.defineProperty;t("data",this),t("config",this)},t.prototype._notifyChange=function(t){switch(t){case"data":this.renderChart()}},t.prototype._onresize=function(){this._internalRenderChart()},t.prototype._setEvents=function(){var t=this;t.$element&&$(window).on("resize."+t.chartId,function(){t.canResize&&(clearTimeout(t.doResize),t.doResize=setTimeout(t._onresize.bind(t),100))})},t.prototype._removeEvents=function(){this.$element&&$(window).off("resize."+this.chartId)},t.prototype._getConfig=function(){var t=this.data.config||{};return t.width=(t.width||"100%")+"",t.height=(t.height||"400px")+"",(t.height.indexOf("px")<0||t.height.indexOf("%")<0)&&(t.height=t.height+"px"),t},t.prototype._append=function(t){t&&(this.options.beforeAdd&&this.options.beforeAdd(this.$element),this.options.replaceParent?t.replaceWith(this.$element):t.append(this.$element))},t.prototype.renderChart=function(){var t=this;t.$element&&(t.rto||(t.rto=window.setTimeout(function(){t.rto=null,t._internalRenderChart()},0)))},t.prototype._internalRenderChart=function(){var t=this.data.config||{};t.valueType=t.valueType||"money",t.colors=t.colors||["#f03558","#fad32d","#45cebd","#f99f46","#6A5ACD","#A0522D","#000000","#696969"],t.colors=["#f03558","#fad32d","#45cebd","#f99f46","#6A5ACD","#A0522D","#000000","#696969"];var e,n,r=this.data.data,i={legend:{position:"top",alignment:"center",maxLines:2},tooltip:{showColorCode:!0,text:"value"},pieHole:0,vAxis:null,hAxis:null,bars:""};if(this.$element.empty(),r&&r.cols&&r.cols.length&&r.rows&&r.rows.length){switch(t.type){case"pie":n="PieChart",e=a(r,i,t);break;case"donut":n="PieChart",e=a(r,i,t),i.pieHole=.4;break;case"line":n="LineChart",i.hAxis={title:r.cols[0].label||""},i.vAxis={title:r.titles.valuesTitle||""},e=s(r,i,t);break;case"area":n="AreaChart",i.hAxis={title:r.cols[0].label||""},i.vAxis={title:r.titles.valuesTitle||""},e=s(r,i,t);break;case"bar":n="BarChart",i.hAxis={title:r.titles.valuesTitle||""},i.vAxis={title:r.cols[0].label||""},i.bars="horizontal",e=s(r,i,t);break;case"column":n="ColumnChart",i.hAxis={title:r.cols[0].label||""},i.vAxis={title:r.titles.valuesTitle||""},e=s(r,i,t);break;case"columnrange":if(n="Timeline",2!=r.rows.length)return null;e=function(t,e,n){var r=new window.google.visualization.DataTable;r.addColumn("string","Id"),r.addColumn("string","Name"),r.addColumn("date","Start"),r.addColumn("date","End");for(var i=[],a=1,s=t.cols.length;a<s;a++){var l=new Array(4);l[0]=a+"",l[1]=t.cols[a].label;var c=t.rows[0][a];c="object"==typeof c?c.value:c,l[2]=c?o.parseISODate(c):null,c="object"==typeof(c=t.rows[1][a])?c.value:c,l[3]=c?o.parseISODate(c):null,i.push(l)}return e.timeline={showRowLabels:!1},e.colors=n.colors,r.addRows(i),r}(r,i,t);break;default:return null}("Bar"==n?new window.google.charts.Bar(this.$element.get(0)):new window.google.visualization[n](this.$element.get(0))).draw(e,i),this.canResize=!0}},t.prototype.render=function(t){var e=this;e.$element?e._append(t):r.loadScript("jsapi","https://www.google.com/jsapi",function(o){if(!o){var i={execute:function(t){window.google.load("visualization","1",{packages:["corechart","timeline"],callback:t})}};r.loadScript("gvisualization","",function(o){var r=e._getConfig();e.$element=$(n.format('<div id="{0}" class="" style="width:{1};height:{2}"></div>',e.chartId,r.width,r.height)),e._append(t),e.renderChart(),e._setEvents()},i)}},null)},t.prototype.destroy=function(){this._removeEvents(),this.$element=null,this.options=null},t}();e.GoogleChart=l,i.register("javascript","widget.content.control.googlechart",l)}(t.ui||(t.ui={}))}(Phoenix||(Phoenix={}));__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){t(e,o);function n(){this.constructor=e}e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();!function(t){!function(t){var e=function(){function t(t,e){this.options=t||{},this.callback=e||null,this.map=null,this.markerList=[]}return t.prototype.newMap=function(){return new t},t.prototype.getLatLng=function(t,e){},t.prototype.initMap=function(t,e){},t.prototype.setMapCenter=function(t,e,o,n){},t.prototype.addMarker=function(t,e,o,n,r){},t.prototype.removeMarker=function(t){},t.prototype.addMarkerByAddress=function(t){},t.prototype.addMarkerByLongLat=function(t,e,o){if(!t||!e)return this.callback&&this.callback(null);if(this.map){this.markerList[0]&&this.removeMarker(this.markerList[0]),this.setMapCenter(this.map,e,t);var n="<b>Adresse :</b><br />"+(o||"longitude : "+t+", latitude : "+e);this.addMarker(this.map,e,t,{message:n})}this.callback&&this.callback({longitude:t,latitude:e,libelle:o})},t}(),o=window.google,n=function(t){__extends(e,t);function e(e,o){return t.call(this,e,o)||this}return e.prototype.getLatLng=function(t,e){var n=new o.maps.Geocoder;if(n){Array.isArray(t)||(t=[t]);var r=0;i(t[0],function o(n){n?e(n):r==t.length-1?e(null):i(t[++r],o)})}function i(t,e){n.geocode({address:t},function(n,r){if(r===o.maps.GeocoderStatus.OK)return e({latitude:n[0].geometry.location.lat(),longitude:n[0].geometry.location.lng(),libelle:t});e(null)})}},e.prototype.initMap=function(t,e){if(t)return e={zoom:(e=e||{}).zoom||16,mapTypeId:e.type||o.maps.MapTypeId.TERRAIN,scrollwheel:!1},this.map=new o.maps.Map(t,e)},e.prototype.setMapCenter=function(t,e,n,r){if(t){var i=new o.maps.LatLng(e,n);t.setCenter(i)}},e.prototype.addMarker=function(t,e,n,r){if(t){r=r||{};var i=new o.maps.LatLng(e,n),a=new o.maps.Marker({position:i,map:t,title:r.message||null});if(r.message){var s=new o.maps.InfoWindow({content:r.message,size:new o.maps.Size(100,100)});o.maps.event.addListener(a,"click",function(){s.open(t,a)})}return this.markerList[0]?this.markerList[0]=a:this.markerList.push(a),a}},e.prototype.removeMarker=function(t){t&&t.setMap(null)},e.prototype.addMarkerByAddress=function(t){var e=this;e.getLatLng(t,function(t){if(!t)return e.callback&&e.callback(null);e.map&&(e.markerList[0]&&e.removeMarker(e.markerList[0]),e.setMapCenter(e.map,t.latitude,t.longitude),e.addMarker(e.map,t.latitude,t.longitude,{message:"<b>Adresse :</b><br />"+t.libelle})),e.callback&&e.callback(t)})},e}(e),r=window.L,i=function(t){__extends(e,t);function e(e,o){return t.call(this,e,o)||this}return e.prototype.getLatLng=function(t,e){var n=new o.maps.Geocoder;if(n){Array.isArray(t)||(t=[t]);var r=0;i(t[0],function o(n){n?e(n):r==t.length-1?e(null):i(t[++r],o)})}function i(t,e){n.geocode({address:t},function(n,r){if(r===o.maps.GeocoderStatus.OK)return e({latitude:n[0].geometry.location.lat(),longitude:n[0].geometry.location.lng(),libelle:t});e(null)})}},e.prototype.initMap=function(t,e){if(t){e=e||{};var o=r.map(t,{center:[0,0],zoom:e.zoom||16});return r.tileLayer(e.tile||"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:e.maxZoom||18,attribution:e.attribution||'&copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors',id:e.id||"mapbox.streets"}).addTo(o),this.map=o}},e.prototype.setMapCenter=function(t,e,o,n){if(t){var i=r.latLng(e,o);t.setView(i)}},e.prototype.addMarker=function(t,e,o,n){if(t){n=n||{};var i=r.marker([e,o]).addTo(t);return n.message&&i.bindPopup(n.message),this.markerList[0]?this.markerList[0]=i:this.markerList.push(i),i}},e.prototype.removeMarker=function(t){t&&this.map&&(t.closePopup(),this.map.removeLayer(t))},e.prototype.addMarkerByAddress=function(t){var e=this;e.getLatLng(t,function(t){if(!t)return e.callback&&e.callback(null);e.map&&(e.markerList[0]&&e.removeMarker(e.markerList[0]),e.setMapCenter(e.map,t.latitude,t.longitude),e.addMarker(e.map,t.latitude,t.longitude,{message:"<b>Adresse :</b><br />"+t.libelle})),e.callback&&e.callback(t)})},e}(e);t.createMapService=function(t,e){var a=(t=t||{}).type||"omap";delete t.type;var s=null;switch(a){case"gmap":u=t,d=e,o=window.google,s=new n(u,d);break;default:l=t,c=e,o=window.google,r=window.L,s=new i(l,c)}var l,c,u,d;return s}}(t.ui||(t.ui={}))}(Phoenix||(Phoenix={}));!function(t){!function(e){var o=t.WidgetUtils,n=t.utils,r=function(){function t(t,e){this._options=t||{},this._options.id=this._options.id||n.allocID(),this._data=e||{}}return t.prototype.render=function(t){if(!this.$element){var e=[];o.widgetTitle(e,this._options.id,this._data,null,!0),this.$element=$(e.join(""))}t&&(this._options.replaceParent?t.replaceWith(this.$element):t.append(this.$element))},t.prototype.destroy=function(){this.$element=null,this._options=null,this._data=null},t}();e.ModuleTitle=r}(t.ui||(t.ui={}))}(Phoenix||(Phoenix={}));var Phoenix;!function(t){!function(e){t.utils;var o=t.render,n=function(){function t(t,e){this.data=t||{},this.options=e||{}}return t.prototype.render=function(t){return this.$element||(this.$element=$("<div></div>")),t&&(this.options.beforeAdd&&this.options.beforeAdd(this.$element),this.options.replaceParent?t.replaceWith(this.$element):t.append(this.$element)),this.$element},t.prototype.destroy=function(){this.$element=null},t}();o.register("javascript","widget.content.control.test",n)}(t.ui||(t.ui={}))}(Phoenix||(Phoenix={}));
//# sourceMappingURL=phoenix.widgets.min.js.map