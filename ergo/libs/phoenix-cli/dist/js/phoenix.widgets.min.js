!function(e){var t,o,n,r;t=e.ui||(e.ui={}),n=e.ulocale,r=e.locale,t.translateHighcharts=(o="",function(){n.currentLang!=o&&(o=n.currentLang,n.currentLang,window.Highcharts&&window.Highcharts.setOptions&&window.Highcharts.setOptions({lang:{months:r.date.months,weekdays:r.date.weekdays,shortMonths:r.date.monthsShort,decimalPoint:r.number.decimal,thousandsSep:r.number.thousand,resetZoom:r.charts.resetZoom,resetZoomTitle:r.charts.resetZoomTitle,rangeSelectorZoom:r.charts.rangeSelectorZoom,rangeSelectorFrom:r.charts.rangeSelectorFrom,rangeSelectorTo:r.charts.rangeSelectorTo}}))})}(Phoenix||(Phoenix={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();!function(e){!function(t){var o=e.utils,n=(e.dom,e.locale,e.$mem,e.link,t),r=e.customData,a=e.render,i=function(){function e(e,t,o,n,r){var a=this;e=e||{},a.formData=n||{$create:!0},a.options=e,a.layout=t,a.schema=o,a.module=r}return e.prototype.render=function(e){var t=this;if(!t.$element){var o={replaceParent:t.options.replaceParent,context:t.options.context,beforeAdd:t.options.beforeAdd,beforeRemove:t.options.beforeRemove,beforeSetModel:t.options.beforeSetModel,afterModelCreated:t.options.afterModelCreated,settingsHandler:t.options.onSettings,storageName:t.options.storageName,validators:t.options.validators,module:t.module},r=t.module&&t.module.data&&t.module.data.data&&t.module.data.data.ds&&t.module.data.data.ds.view?t.module.data.data.ds.view.$view:null;n.OpenForm(e,t.layout,t.schema,t.formData||{},r,t.action,o,function(e){t.form=e,t.$element=t.form.$element})}},e.prototype.destroy=function(){var e=this;e.form&&(e.form.destroy(),e.form=null),e.$element=null},e}();t.FormContainer=i,a.register("javascript","widget.content.control.form",i);var l=function(e){function n(n,a,i,l,s){var c=this;if(!a)throw"Form name is empty.";if(!i)throw"Meta name (schema) is empty.";if(!l)throw"Controller name is empty.";var u=r.get(l);if(!u)throw o.format('Controller not found "{0}". Use customData.register(controllerName, ctrlConfig).',l);t.formController2Options(n,u);var d=u.data?u.data():null;return c=e.call(this,n,a,i,d,s)||this,u.isFormController?c.action=u.modelChanged.bind(u):u.onModelChanged&&(c.action=u.onModelChanged.bind(u)),c}return __extends(n,e),n}(i);t.FormContainerController=l}(e.ui||(e.ui={}))}(Phoenix||(Phoenix={})),function(e){var t,o,n,r,a,i,l,s;t=e.ui||(e.ui={}),o=e.ulocale,n=e.utils,r=e.ajax,a=e.render,i=function(e,t,n){var r="money"==n.valueType,a=new window.google.visualization.DataTable;e.titles=e.titles||{},e.rows=e.rows||[],a.addColumn("string",e.cols[0].label),a.addColumn("number",e.titles.seriesTitle||"");for(var i=[],l=1,s=e.cols.length;l<s;l++){for(var c=[e.cols[l].label,{v:0,f:""}],u=0,d=e.rows.length;u<d;u++){var p=e.rows[u][l];p&&(c[1].v+="object"==typeof p?p.value:p)}c[1].v=parseFloat(c[1].v.toFixed(6)),r&&(c[1].f=o.money(c[1].v,!0)),i.push(c)}return a.addRows(i),n.colors&&(t.slices={},n.colors.forEach(function(e,o){t.slices[o]={color:e}})),a},l=function(e,t,n){var r="money"==n.valueType,a=new window.google.google.visualization.DataTable,i=[];e.titles=e.titles||{},e.rows=e.rows||[];for(var l=0,s=e.cols.length;l<s;l++)a.addColumn(l?"number":"string",e.cols[l].label);for(var c=0,u=e.rows.length;c<u;c++){var d=new Array(e.cols.length);for(l=0,s=e.cols.length;l<s;l++){var p=e.rows[c][l];0==l?d[l]="object"==typeof p?p.value:p:(d[l]={v:"object"==typeof p?p.value:p},r&&(d[l].f=o.money(d[l].v,!0)))}i.push(d)}return t.colors=n.colors,a.addRows(i),a},s=function(){function e(e){var t=this;t.options=e||{},t.props={},t.data={},t.chartId=n.allocID(),t._defineProps()}return e.prototype._defineProps=function(){var e=n.defineProperty;e("data",this),e("config",this)},e.prototype._notifyChange=function(e){switch(e){case"data":this.renderChart()}},e.prototype._onresize=function(){this._internalRenderChart()},e.prototype._setEvents=function(){var e=this;e.$element&&$(window).on("resize."+e.chartId,function(){e.canResize&&(clearTimeout(e.doResize),e.doResize=setTimeout(e._onresize.bind(e),100))})},e.prototype._removeEvents=function(){this.$element&&$(window).off("resize."+this.chartId)},e.prototype._getConfig=function(){var e=this.data.config||{};return e.width=(e.width||"100%")+"",e.height=(e.height||"400px")+"",(e.height.indexOf("px")<0||e.height.indexOf("%")<0)&&(e.height=e.height+"px"),e},e.prototype._append=function(e){var t=this;e&&(t.options.beforeAdd&&t.options.beforeAdd(t.$element),t.options.replaceParent?e.replaceWith(t.$element):e.append(t.$element))},e.prototype.renderChart=function(){var e=this;e.$element&&(e.rto||(e.rto=window.setTimeout(function(){e.rto=null,e._internalRenderChart()},0)))},e.prototype._internalRenderChart=function(){var e=this,t=e.data.config||{};t.valueType=t.valueType||"money",t.colors=t.colors||["#f03558","#fad32d","#45cebd","#f99f46","#6A5ACD","#A0522D","#000000","#696969"],t.colors=["#f03558","#fad32d","#45cebd","#f99f46","#6A5ACD","#A0522D","#000000","#696969"];var n,r,a=e.data.data,s={legend:{position:"top",alignment:"center",maxLines:2},tooltip:{showColorCode:!0,text:"value"},pieHole:0,vAxis:null,hAxis:null,bars:""};if(e.$element.empty(),a&&a.cols&&a.cols.length&&a.rows&&a.rows.length){switch(t.type){case"pie":r="PieChart",n=i(a,s,t);break;case"donut":r="PieChart",n=i(a,s,t),s.pieHole=.4;break;case"line":r="LineChart",s.hAxis={title:a.cols[0].label||""},s.vAxis={title:a.titles.valuesTitle||""},n=l(a,s,t);break;case"area":r="AreaChart",s.hAxis={title:a.cols[0].label||""},s.vAxis={title:a.titles.valuesTitle||""},n=l(a,s,t);break;case"bar":r="BarChart",s.hAxis={title:a.titles.valuesTitle||""},s.vAxis={title:a.cols[0].label||""},s.bars="horizontal",n=l(a,s,t);break;case"column":r="ColumnChart",s.hAxis={title:a.cols[0].label||""},s.vAxis={title:a.titles.valuesTitle||""},n=l(a,s,t);break;case"columnrange":if(r="Timeline",2!=a.rows.length)return null;n=function(e,t,n){var r=new window.google.visualization.DataTable;r.addColumn("string","Id"),r.addColumn("string","Name"),r.addColumn("date","Start"),r.addColumn("date","End");for(var a=[],i=1,l=e.cols.length;i<l;i++){var s=new Array(4);s[0]=i+"",s[1]=e.cols[i].label;var c=e.rows[0][i];c="object"==typeof c?c.value:c,s[2]=c?o.parseISODate(c):null,c="object"==typeof(c=e.rows[1][i])?c.value:c,s[3]=c?o.parseISODate(c):null,a.push(s)}return t.timeline={showRowLabels:!1},t.colors=n.colors,r.addRows(a),r}(a,s,t);break;default:return null}("Bar"==r?new window.google.charts.Bar(e.$element.get(0)):new window.google.visualization[r](e.$element.get(0))).draw(n,s),e.canResize=!0}},e.prototype.render=function(e){var t=this;t.$element?t._append(e):r.loadScript("jsapi","https://www.google.com/jsapi",function(o){if(!o){var a={execute:function(e){window.google.load("visualization","1",{packages:["corechart","timeline"],callback:e})}};r.loadScript("gvisualization","",function(o){var r=t._getConfig();t.$element=$(n.format('<div id="{0}" class="" style="width:{1};height:{2}"></div>',t.chartId,r.width,r.height)),t._append(e),t.renderChart(),t._setEvents()},a)}},null)},e.prototype.destroy=function(){this._removeEvents(),this.$element=null,this.options=null},e}(),t.GoogleChart=s,a.register("javascript","widget.content.control.googlechart",s)}(Phoenix||(Phoenix={}));var Phoenix;__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();!function(e){var t,o,n,r,a,i;t=e.ui||(e.ui={}),o=function(){function e(e,t){this.options=e||{},this.callback=t||null,this.map=null,this.markerList=[]}return e.prototype.newMap=function(){return new e},e.prototype.getLatLng=function(e,t){},e.prototype.initMap=function(e,t){},e.prototype.setMapCenter=function(e,t,o,n){},e.prototype.addMarker=function(e,t,o,n,r){},e.prototype.removeMarker=function(e){},e.prototype.addMarkerByAddress=function(e){},e.prototype.addMarkerByLongLat=function(e,t,o){var n=this;if(!e||!t)return n.callback&&n.callback(null);if(n.map){n.markerList[0]&&n.removeMarker(n.markerList[0]),n.setMapCenter(n.map,t,e);var r="<b>Adresse :</b><br />"+(o||"longitude : "+e+", latitude : "+t);n.addMarker(n.map,t,e,{message:r})}n.callback&&n.callback({longitude:e,latitude:t,libelle:o})},e}(),n=window.google,r=function(e){function t(t,o){return e.call(this,t,o)||this}return __extends(t,e),t.prototype.getLatLng=function(e,t){var o=new n.maps.Geocoder;if(o){Array.isArray(e)||(e=[e]);var r=0;a(e[0],function o(n){n?t(n):r==e.length-1?t(null):a(e[++r],o)})}function a(e,t){o.geocode({address:e},function(o,r){if(r===n.maps.GeocoderStatus.OK)return t({latitude:o[0].geometry.location.lat(),longitude:o[0].geometry.location.lng(),libelle:e});t(null)})}},t.prototype.initMap=function(e,t){if(e)return t={zoom:(t=t||{}).zoom||16,mapTypeId:t.type||n.maps.MapTypeId.TERRAIN,scrollwheel:!1},this.map=new n.maps.Map(e,t)},t.prototype.setMapCenter=function(e,t,o,r){if(e){var a=new n.maps.LatLng(t,o);e.setCenter(a)}},t.prototype.addMarker=function(e,t,o,r){if(e){r=r||{};var a=new n.maps.LatLng(t,o),i=new n.maps.Marker({position:a,map:e,title:r.message||null});if(r.message){var l=new n.maps.InfoWindow({content:r.message,size:new n.maps.Size(100,100)});n.maps.event.addListener(i,"click",function(){l.open(e,i)})}return this.markerList[0]?this.markerList[0]=i:this.markerList.push(i),i}},t.prototype.removeMarker=function(e){e&&e.setMap(null)},t.prototype.addMarkerByAddress=function(e){var t=this;t.getLatLng(e,function(e){if(!e)return t.callback&&t.callback(null);t.map&&(t.markerList[0]&&t.removeMarker(t.markerList[0]),t.setMapCenter(t.map,e.latitude,e.longitude),t.addMarker(t.map,e.latitude,e.longitude,{message:"<b>Adresse :</b><br />"+e.libelle})),t.callback&&t.callback(e)})},t}(o),a=window.L,i=function(e){function t(t,o){return e.call(this,t,o)||this}return __extends(t,e),t.prototype.getLatLng=function(e,t){var o=new n.maps.Geocoder;if(o){Array.isArray(e)||(e=[e]);var r=0;a(e[0],function o(n){n?t(n):r==e.length-1?t(null):a(e[++r],o)})}function a(e,t){o.geocode({address:e},function(o,r){if(r===n.maps.GeocoderStatus.OK)return t({latitude:o[0].geometry.location.lat(),longitude:o[0].geometry.location.lng(),libelle:e});t(null)})}},t.prototype.initMap=function(e,t){if(e){t=t||{};var o=a.map(e,{center:[0,0],zoom:t.zoom||16});return a.tileLayer(t.tile||"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:t.maxZoom||18,attribution:t.attribution||'&copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors',id:t.id||"mapbox.streets"}).addTo(o),this.map=o}},t.prototype.setMapCenter=function(e,t,o,n){if(e){var r=a.latLng(t,o);e.setView(r)}},t.prototype.addMarker=function(e,t,o,n){if(e){n=n||{};var r=a.marker([t,o]).addTo(e);return n.message&&r.bindPopup(n.message),this.markerList[0]?this.markerList[0]=r:this.markerList.push(r),r}},t.prototype.removeMarker=function(e){e&&this.map&&(e.closePopup(),this.map.removeLayer(e))},t.prototype.addMarkerByAddress=function(e){var t=this;t.getLatLng(e,function(e){if(!e)return t.callback&&t.callback(null);t.map&&(t.markerList[0]&&t.removeMarker(t.markerList[0]),t.setMapCenter(t.map,e.latitude,e.longitude),t.addMarker(t.map,e.latitude,e.longitude,{message:"<b>Adresse :</b><br />"+e.libelle})),t.callback&&t.callback(e)})},t}(o),t.createMapService=function(e,t){var o=(e=e||{}).type||"omap";delete e.type;var l,s,c,u,d=null;switch(o){case"gmap":c=e,u=t,n=window.google,d=new r(c,u);break;default:l=e,s=t,n=window.google,a=window.L,d=new i(l,s)}return d}}(Phoenix||(Phoenix={})),function(e){var t,o,n,r;t=e.ui||(e.ui={}),o=e.WidgetUtils,n=e.utils,r=function(){function e(e,t){this._options=e||{},this._options.id=this._options.id||n.allocID(),this._data=t||{}}return e.prototype.render=function(e){var t=this;if(!t.$element){var n=[];o.widgetTitle(n,t._options.id,t._data,null,!0),t.$element=$(n.join(""))}e&&(t._options.replaceParent?e.replaceWith(t.$element):e.append(t.$element))},e.prototype.destroy=function(){this.$element=null,this._options=null,this._data=null},e}(),t.ModuleTitle=r}(Phoenix||(Phoenix={})),function(e){!function(t){e.utils;var o=e.render,n=function(){function e(e,t){this.data=e||{},this.options=t||{}}return e.prototype.render=function(e){var t=this;return t.$element||(t.$element=$("<div></div>")),e&&(t.options.beforeAdd&&t.options.beforeAdd(t.$element),t.options.replaceParent?e.replaceWith(t.$element):e.append(t.$element)),t.$element},e.prototype.destroy=function(){this.$element=null},e}();o.register("javascript","widget.content.control.test",n)}(e.ui||(e.ui={}))}(Phoenix||(Phoenix={}));
//# sourceMappingURL=phoenix.widgets.min.js.map