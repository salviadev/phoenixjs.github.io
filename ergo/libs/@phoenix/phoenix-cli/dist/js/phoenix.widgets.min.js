var __extends=this&&this.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)};return function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}();!function(n){!function(c){var p=n.utils,r=(n.dom,n.locale,n.$mem,n.link,c),u=n.customData,t=n.render,e=function(){function t(t,e,o,n,r,i){var a=this;t=t||{},a.formData=n||{$create:!0},a.options=t,a.layout=e,a.schema=o,a.module=r,a.preferences=i}return t.prototype.render=function(t){var e=this;if(!e.$element){var o={replaceParent:e.options.replaceParent,context:e.options.context,beforeAdd:e.options.beforeAdd,beforeRemove:e.options.beforeRemove,beforeSetModel:e.options.beforeSetModel,afterModelCreated:e.options.afterModelCreated,settingsHandler:e.options.onSettings,storageName:e.options.storageName,validators:e.options.validators,module:e.module,preferences:e.preferences},n=e.module&&e.module.data&&e.module.data.data&&e.module.data.data.ds&&e.module.data.data.ds.view?e.module.data.data.ds.view.$view:null;r.OpenForm(t,e.layout,e.schema,e.formData||{},n,e.action,null,o,function(t){e.form=t,e.$element=e.form.$element})}},t.prototype.destroy=function(){var t=this;t.form&&(t.form.destroy(),t.form=null),t.$element=null},t}();c.FormContainer=e,t.register("javascript","widget.content.control.form",e);var o=function(d){function t(t,e,o,n,r,i){var a=this;if(!e)throw"Form name is empty.";if(!o)throw"Meta name (schema) is empty.";if(!n)throw"Controller name is empty.";var s=u.get(n);if(!s)throw p.format('Controller not found "{0}". Use customData.register(controllerName, ctrlConfig).',n);c.formController2Options(t,s);var l=s.data?s.data():null;return a=d.call(this,t,e,o,l,r,i)||this,s.isFormController?a.action=s.modelChanged.bind(s):s.onModelChanged&&(a.action=s.onModelChanged.bind(s)),a}return __extends(t,d),t}(e);c.FormContainerController=o}(n.ui||(n.ui={}))}(Phoenix||(Phoenix={}));var Phoenix;__extends=this&&this.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)};return function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}();!function(t){var e,o,s=t,i=s.utils,l=s.dom,n=s.ui,d=s.customData,a=s.uiutils;e=t.charts||(t.charts={}),o=function(r){function t(t,e,o){var n=r.call(this,t,e,o)||this;return n._state(),n}return __extends(t,r),t.prototype.click=function(t){},t.prototype._setDisabled=function(t){},t.prototype._setReadOnly=function(t){},t.prototype._setMandatory=function(t){},t.prototype.changed=function(t,e,o,n,r){var i=this;t!==i.$bind&&i.form.inSync?i.form.inSync&&(i.form.forceAfterProcessing(),i.form.execLater({id:i.id,hnd:function(){i._renderChart(!1)}})):(i.state.value=i.form.getValue(i.$bind),i._renderChart(!1))},t.prototype.destroy=function(){this._chart&&(this._chart.destroy(),this._chart=null),r.prototype.destroy.call(this)},t.prototype._renderChart=function(t){var e=this,o=e.state.value?e.state.value.model(!1):{},n=e.renderOptions;n.transform&&(o=d.get(n.transform)(o,e.form.$model));o||(o={});var r=Array.isArray(o)?o:[o],i=e.renderOptions.chart||{},a=e.$element.get(0);e._chart&&(e._chart.destroy(),e._chart=null,l.empty(a)),e._chart=s.highcharts.createHighChart(a,i,r)},t.prototype.resize=function(){this._chart&&this._chart.reflow()},t.prototype.stateChanged=function(t,e){var o=this,n=o.form.getState(o.$bind),r=o.$element?o.$element.get(0):null;n.isHidden!==o.state.isHidden&&(o.state.isHidden=n.isHidden,o.setHidden(r)),n.isDisabled!==o.state.isDisabled&&(o.state.isDisabled=n.isDisabled,o._setDisabled(r)),n.isReadOnly!==o.state.isReadOnly&&(o.state.isReadOnly=n.isReadOnly,o._setReadOnly(r)),n.isMandatory!==o.state.isMandatory&&(o.state.isMandatory=n.isMandatory,o._setMandatory(r))},t.prototype._containerContent=function(t){},t.prototype.render=function(t){var e=this,o=e._initOptions(a.utils.defaultOptions);return e.$element||(e.$element=$(function(t,e,o,n){e=$.extend({titleIsHidden:!1,placeHolder:!1,columns:!1},e);var r=[];return a.utils.fieldWrapper(r,e,o,function(){n&&n(r)}),i.format(r.join(""),t)}(e.id,o,e.options.design,function(t){e._containerContent(t)})),e._renderChart(!0),e.setEvents(o)),e.appendElement(t,o),e.$element},t}(t.ui.AbsField),e.ChartBase=o,n.registerControl(o,"object",!1,"highchart",null)}(Phoenix||(Phoenix={})),function(i){!function(t){var e=i,o=i.dom,n=e.ulocale,a=e.locale,s=["#f03558","#fad32d","#45cebd","#f99f46","#6A5ACD","#A0522D","#000000","#696969"],l={addToolTipHeaderFormat:function(t,e){return t.tooltip&&t.tooltip.headerFormat?t.tooltip.headerFormat:'<span style="font-size: 11px;font-weight:normal">{'+e+"}</span><br/>"},addToolTipPointFormat:function(t,e){return t.tooltip&&t.tooltip.pointFormat?t.tooltip.pointFormat:e},addLabel:function(t,e){return t.label?{enabled:void 0===typeof t.label.visible||t.label.visible,format:t.label.format||e}:{enabled:!0,format:e}},addOptions:function(e,o){if(o){if(Array.isArray(o)){e=Array.isArray(e)?e:[];for(var t=0;t<o.length;t++)e[t]=l.addOptions(e[t]||{},o[t])}else"object"==typeof o?Object.keys(o).forEach(function(t){e[t]=l.addOptions(e[t]||{},o[t])}):e=o;return e}}};t.createHighChart=function(t,e,o){var n,r,i=function(t){var e=t.decimals;void 0===e&&(e=a.number.places);var o=t.symbol;void 0===o&&(o=a.number.symbol);var n=t.type||"pie",r={chart:{type:n,plotBackgroundColor:null,plotBorderWidth:0,plotShadow:!1,reflow:!0},tooltip:{pointFormat:l.addToolTipPointFormat(t,"<b>{point.y:,."+e+"f} "+o+"</b>"),headerFormat:l.addToolTipHeaderFormat(t,"point.key"),style:{padding:10,fontWeight:"bold"}},legend:{itemStyle:{cursor:"default"}},credits:{enabled:!1},lang:{decimalPoint:a.number.decimal},plotOptions:{series:{allowPointSelect:!1}},colors:[],series:[],title:{text:t.title||""}};return r.plotOptions[n]={allowPointSelect:!0,cursor:"pointer",dataLabels:l.addLabel(t,"{point.percentage:,."+e+"f}%"),showInLegend:!0,events:{legendItemClick:function(t){return!1}},point:{events:{legendItemClick:function(t){return!1}}}},r.colors=t.colors||s.slice(),r}(e);return function(t,e){var o=t.chart.type,n=e.symbol;void 0===n&&(n=a.number.symbol);var r=e.decimals;switch(void 0===r&&(r=a.number.places),o){case"column":t.tooltip.headerFormat=l.addToolTipHeaderFormat(e,"series.name"),t.plotOptions[o].dataLabels=l.addLabel(e,"{point.y:,."+r+"f} "+n),t.xAxis={gridLineWidth:0,minorGridLineWidth:0,title:{text:null},labels:{enabled:!0},minorTickLength:0,tickLength:0},t.yAxis={min:0,margin:[0,0,0,0],gridLineWidth:2,gridLineDashStyle:"Dot",title:{text:null,style:{display:"none"},margin:[0,0,0,0]}};break;case"columnrange":t.chart.inverted=!0,t.tooltip={pointFormat:l.addToolTipPointFormat(e,"{point.low:%d/%m/%Y} - {point.high:%d/%m/%Y}"),style:{padding:10,fontWeight:"bold"}},t.exporting={enabled:!1},t.legend=t.legend||{},t.legend.enabled=!1,t.plotOptions.columnrange.dataLabels=l.addLabel(e,"point.y:%d/%m/%Y"),t.plotOptions.columnrange.colorByPoint=!0,t.plotOptions.columnrange.borderWidth=0,t.xAxis={gridLineWidth:2,gridLineDashStyle:"Dot"},t.yAxis={title:{text:null},type:"datetime",tickInterval:31536e6,minorTickInterval:31536e6,dateTimeLabelFormats:{year:"%Y"},gridLineWidth:5,gridLineColor:"#eee"};var i=new Date;t.yAxis.plotLines=[{color:"#747679",width:2,value:i}]}}(i,e),n=i,r=e,n=l.addOptions(n,r.options),t.style.height=e.height||"300px",i.chart.renderTo=t,i.series=o,new window.Highcharts.Chart(i)};var r=function(t){var e=window;e.Highcharts&&e.Highcharts.setOptions&&e.Highcharts.setOptions({lang:{months:a.date.months,weekdays:a.date.weekdays,shortMonths:a.date.monthsShort,decimalPoint:a.number.decimal,thousandsSep:a.number.thousand,resetZoom:a.charts.resetZoom,resetZoomTitle:a.charts.resetZoomTitle,rangeSelectorZoom:a.charts.rangeSelectorZoom,rangeSelectorFrom:a.charts.rangeSelectorFrom,rangeSelectorTo:a.charts.rangeSelectorTo}})};o.readyHandlers.push(function(){r(n.currentLang)}),n.register(r)}(i.highcharts||(i.highcharts={}))}(Phoenix||(Phoenix={}));
//# sourceMappingURL=phoenix.widgets.min.js.map