var Phoenix;!function(a){var b;!function(b){var c=['<div id="{0}" class="carousel bs-carousel">','<ol class="carousel-indicators"></ol>','<div class="carousel-inner"></div>','<a data-slide="prev" data-target="#{0}" class="left carousel-control" style="cursor:pointer;"><span class="glyphicon glyphicon-chevron-left"></span></a>','<a data-slide="next" data-target="#{0}" class="right carousel-control" style="cursor:pointer;"><span class="glyphicon glyphicon-chevron-right"></span></a>',"</div>"],d=a.utils,e=a.dom,f=a.device,g=(a.render,function(a,b){a.appendChild($('<h4 class="title">Photo : '+b.title+"</h4>").get(0));var c=$("<div></div>").get(0);c.appendChild($('<img alt="Pas de photo" src="'+b.url+'" />').get(0)),a.appendChild(c)}),h=function(){function a(a){var b=this;b.options=a||{},b.props={},b.data={slides:[]},b.carouselId=d.allocID(),b._defineProps()}return a.prototype._defineProps=function(){var a=this,b=d.defineProperty;b("slides",a)},a.prototype._notifyChange=function(a){var b=this;switch(a){case"slides":b._createSlides()}},a.prototype._renderSlide=function(a,b){return"image"==b.$type?g(a,b):void a.appendChild($('<div style="min-height:200px; background-color: red;"><center>Invalid slide definition.</center></div>').get(0))},a.prototype._createSlides=function(){var a=this;if(a.$element){var b=a.$element.get(0),c=e.query(b,".carousel-indicators"),d=e.query(b,".carousel-inner");$(c).empty(),$(d).empty();var f=document.createDocumentFragment(),g=document.createDocumentFragment(),h=$('<li data-slide-to="1" data-target="#'+a.carouselId+'"></li>').get(0),i=$('<div class="item"></div>').get(0);a.data.slides.forEach(function(b,c){var d=h.cloneNode(!0),j=i.cloneNode(!0);e.attr(d,"data-slide-to",c),c||(e.addClass(d,"active"),e.addClass(j,"active")),f.appendChild(d),a._renderSlide(j,b),g.appendChild(j)}),a.data.slides.length?(c.appendChild(f),d.appendChild(g),e.removeClass(b,"bs-none")):e.addClass(b,"bs-none"),a.$element.carousel("pause")}},a.prototype._setEvents=function(){var a=this;a.$element&&a.$element.swipe&&"windows"!=f.deviceType&&a.$element.swipe({excludedElements:" button, input, select, textarea, .noSwipe",swipeLeft:function(b){a.$element.carousel("prev")},swipeRight:function(b){a.$element.carousel("next")}})},a.prototype._removeEvents=function(){var a=this;a.$element&&a.$element.swipe&&"windows"!=f.deviceType&&a.$element.swipe("destroy")},a.prototype.render=function(a){var b=this;return b.$element||(b.$element=$(d.format(c.join(""),b.carouselId)),b._createSlides(),b._setEvents()),a&&(b.options.replaceParent?a.replaceWith(b.$element):a.append(b.$element)),b.$element},a.prototype.destroy=function(){var a=this;a._removeEvents(),a.$element=null,a.options=null},a}();b.Carousel=h}(b=a.ui||(a.ui={}))}(Phoenix||(Phoenix={}));
//# sourceMappingURL=carousel.control.js.map
var Phoenix;!function(a){var b;!function(b){var c=a.ulocale,d=a.locale,e=function(a){window.Highcharts&&window.Highcharts.setOptions&&window.Highcharts.setOptions({lang:{months:d.date.months,weekdays:d.date.weekdays,shortMonths:d.date.monthsShort,decimalPoint:d.number.decimal,thousandsSep:d.number.thousand,resetZoom:d.charts.resetZoom,resetZoomTitle:d.charts.resetZoomTitle,rangeSelectorZoom:d.charts.rangeSelectorZoom,rangeSelectorFrom:d.charts.rangeSelectorFrom,rangeSelectorTo:d.charts.rangeSelectorTo}})},f=function(){var a="";return function(){c.currentLang!=a&&(a=c.currentLang,e(c.currentLang))}};b.translateHighcharts=f()}(b=a.ui||(a.ui={}))}(Phoenix||(Phoenix={}));
//# sourceMappingURL=highcharts.control.js.map
var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Phoenix;!function(a){var b;!function(b){var c=a.utils,d=(a.dom,a.locale,a.$mem,a.link,b),e=a.customData,f=a.render,g=function(){function a(a,b,c,d,e){var f=this;a=a||{},f.formData=d||{},f.options=a,f.layout=b,f.schema=c,f.module=e}return a.prototype.render=function(a){var b=this;if(!b.$element){var c={replaceParent:b.options.replaceParent,context:b.options.context,beforeAdd:b.options.beforeAdd,beforeRemove:b.options.beforeRemove,beforeSetModel:b.options.beforeSetModel,afterModelCreated:b.options.afterModelCreated,settingsHandler:b.options.onSettings,storageName:b.options.storageName,validators:b.options.validators,module:b.module},e=b.module&&b.module.data&&b.module.data.data&&b.module.data.data.ds&&b.module.data.data.ds.view?b.module.data.data.ds.view.$view:null;d.OpenForm(a,b.layout,b.schema,b.formData||{},e,b.action,c,function(a){b.form=a,b.$element=b.form.$element})}},a.prototype.destroy=function(){var a=this;a.form&&(a.form.destroy(),a.form=null),a.$element=null},a}();b.FormContainer=g,f.register("javascript","widget.content.control.form",g);var h=function(a){function b(b,d,f,g,h){if(!d)throw"Form name is empty.";if(!f)throw"Meta name (schema) is empty.";if(!g)throw"Controller name is empty.";var i=e.get(g);if(!i)throw c.format('Controller not found "{0}". Use customData.register(controllerName, ctrlConfig).',g);b.beforeSetModel=i.initObjectState?i.initObjectState.bind(i):null,b.beforeModelCreated=i.initModel?i.initModel.bind(i):null,b.onSettings=i.onSettings?i.onSettings.bind(i):null,b.storageName=i.storageName,b.validators=i.validators;var j=i.data?i.data():null;a.call(this,b,d,f,j,h),i.onModelChanged&&(this.action=i.onModelChanged.bind(i))}return __extends(b,a),b}(g);b.FormContainerController=h}(b=a.ui||(a.ui={}))}(Phoenix||(Phoenix={}));
//# sourceMappingURL=inlineform.js.map
var Phoenix;!function(a){var b;!function(b){var c=a.ulocale,d=a.utils,e=a.ajax,f=a.render,g='<div id="{0}" class="" style="width:{1};height:{2}"></div>',h=function(a,b,d){var e=new window.google.visualization.DataTable;e.addColumn("string","Id"),e.addColumn("string","Name"),e.addColumn("date","Start"),e.addColumn("date","End");for(var f=[],g=1,h=a.cols.length;h>g;g++){var i=new Array(4);i[0]=g+"",i[1]=a.cols[g].label;var j=a.rows[0][g];j="object"==typeof j?j.value:j,j?i[2]=c.parseISODate(j):i[2]=null,j=a.rows[1][g],j="object"==typeof j?j.value:j,j?i[3]=c.parseISODate(j):i[3]=null,f.push(i)}return b.timeline={showRowLabels:!1},b.colors=d.colors,e.addRows(f),e},i=function(a,b,d){var e="money"==d.valueType,f=new window.google.visualization.DataTable;a.titles=a.titles||{},a.rows=a.rows||[],f.addColumn("string",a.cols[0].label),f.addColumn("number",a.titles.seriesTitle||"");for(var g=[],h=1,i=a.cols.length;i>h;h++){for(var j=[a.cols[h].label,{v:0,f:""}],k=0,l=a.rows.length;l>k;k++){var m=a.rows[k][h];m&&(j[1].v+="object"==typeof m?m.value:m)}j[1].v=parseFloat(j[1].v.toFixed(6)),e&&(j[1].f=c.money(j[1].v,!0)),g.push(j)}return f.addRows(g),d.colors&&(b.slices={},d.colors.forEach(function(a,c){b.slices[c]={color:a}})),f},j=function(a,b,d){var e="money"==d.valueType,f=new window.google.google.visualization.DataTable,g=[];a.titles=a.titles||{},a.rows=a.rows||[];for(var h=0,i=a.cols.length;i>h;h++)f.addColumn(h?"number":"string",a.cols[h].label);for(var j=0,k=a.rows.length;k>j;j++){for(var l=new Array(a.cols.length),h=0,i=a.cols.length;i>h;h++){var m=a.rows[j][h];0==h?l[h]="object"==typeof m?m.value:m:(l[h]={v:"object"==typeof m?m.value:m},e&&(l[h].f=c.money(l[h].v,!0)))}g.push(l)}return b.colors=d.colors,f.addRows(g),f},k=function(){function a(a){var b=this;b.options=a||{},b.props={},b.data={},b.chartId=d.allocID(),b._defineProps()}return a.prototype._defineProps=function(){var a=this,b=d.defineProperty;b("data",a),b("config",a)},a.prototype._notifyChange=function(a){var b=this;switch(a){case"data":b.renderChart()}},a.prototype._onresize=function(){var a=this;a._internalRenderChart()},a.prototype._setEvents=function(){var a=this;a.$element&&$(window).on("resize."+a.chartId,function(){a.canResize&&(clearTimeout(a.doResize),a.doResize=setTimeout(a._onresize.bind(a),100))})},a.prototype._removeEvents=function(){var a=this;a.$element&&$(window).off("resize."+a.chartId)},a.prototype._getConfig=function(){var a=this,b=a.data.config||{};return b.width=(b.width||"100%")+"",b.height=(b.height||"400px")+"",(b.height.indexOf("px")<0||b.height.indexOf("%")<0)&&(b.height=b.height+"px"),b},a.prototype._append=function(a){var b=this;a&&(b.options.beforeAdd&&b.options.beforeAdd(b.$element),b.options.replaceParent?a.replaceWith(b.$element):a.append(b.$element))},a.prototype.renderChart=function(){var a=this;a.$element&&(a.rto||(a.rto=window.setTimeout(function(){a.rto=null,a._internalRenderChart()},0)))},a.prototype._internalRenderChart=function(){var a=this,b=a.data.config||{};b.valueType=b.valueType||"money",b.colors=b.colors||["#f03558","#fad32d","#45cebd","#f99f46","#6A5ACD","#A0522D","#000000","#696969"],b.colors=["#f03558","#fad32d","#45cebd","#f99f46","#6A5ACD","#A0522D","#000000","#696969"];var c,d,e=a.data.data,f={legend:{position:"top",alignment:"center",maxLines:2},tooltip:{showColorCode:!0,text:"value"},pieHole:0,vAxis:null,hAxis:null,bars:""};if(a.$element.empty(),e&&e.cols&&e.cols.length&&e.rows&&e.rows.length){switch(b.type){case"pie":d="PieChart",c=i(e,f,b);break;case"donut":d="PieChart",c=i(e,f,b),f.pieHole=.4;break;case"line":d="LineChart",f.hAxis={title:e.cols[0].label||""},f.vAxis={title:e.titles.valuesTitle||""},c=j(e,f,b);break;case"area":d="AreaChart",f.hAxis={title:e.cols[0].label||""},f.vAxis={title:e.titles.valuesTitle||""},c=j(e,f,b);break;case"bar":d="BarChart",f.hAxis={title:e.titles.valuesTitle||""},f.vAxis={title:e.cols[0].label||""},f.bars="horizontal",c=j(e,f,b);break;case"column":d="ColumnChart",f.hAxis={title:e.cols[0].label||""},f.vAxis={title:e.titles.valuesTitle||""},c=j(e,f,b);break;case"columnrange":if(d="Timeline",2!=e.rows.length)return null;c=h(e,f,b);break;default:return null}var g="Bar"==d?new window.google.charts.Bar(a.$element.get(0)):new window.google.visualization[d](a.$element.get(0));g.draw(c,f),a.canResize=!0}},a.prototype.render=function(a){var b=this;b.$element?b._append(a):e.loadScript("jsapi","https://www.google.com/jsapi",function(c){if(!c){var f={execute:function(a){window.google.load("visualization","1",{packages:["corechart","timeline"],callback:a})}};e.loadScript("gvisualization","",function(c){var e=b._getConfig();b.$element=$(d.format(g,b.chartId,e.width,e.height)),b._append(a),b.renderChart(),b._setEvents()},f)}},null)},a.prototype.destroy=function(){var a=this;a._removeEvents(),a.$element=null,a.options=null},a}();b.GoogleChart=k,f.register("javascript","widget.content.control.googlechart",k)}(b=a.ui||(a.ui={}))}(Phoenix||(Phoenix={}));
//# sourceMappingURL=charts.control.js.map
var Phoenix;!function(a){var b;!function(b){var c=a.ulocale,d=a.utils,e=a.locale,f=(a.ajax,a.dom),g=b,h=a.build,i=a.application,j=(a.render,a.link),k=function(){var a=[];return a.push('<nav class="navbar navbar-inverse navbar-fixed-top">'),a.push('    <div class="container-fluid no-x-padding">'),a.push('        <div class="bs-title bs-title-nav-pos header_title"></div>'),a.push('        <ul class="nav navbar-nav no-x-margin no-y-margin bs-nav-button bs-left-nav header_left_buttons">'),a.push("        </ul>"),a.push('        <ul class="nav navbar-nav no-x-margin no-y-margin bs-nav-button bs-right-nav header_right_buttons">'),a.push("        </ul>"),a.push("    </div>"),a.push("</nav>"),$(a.join(""))},l=function(a){return"logout"===a.$pattern&&(a.icon="lock",a.title=e.ui.Disconnect,a.link={$logout:!0},delete a.$pattern),a},m=function(a,b){var e=[];if(e.push('<li id="{1}">'),"logo"===a.$type)e.push('<a tabindex="-1" class="hidden-xs bs-nav-logo '+a.$className+'" href="#" data-phoenix-href="click://{0}"></a>');else{var g=["bs-icon-header"];a.iconStyle?f.parseStyle(a.iconStyle,g):g.push("bs-style-icon-lg"),a.title||a.expression?(e.push('<a class="bs-nav-link"'),e.push('  href="#" data-phoenix-href="click://{0}"'),e.push(">"),e.push('<span class="'+g.join(" ")+' {2}"></span>'),e.push('<span class="bs-icon-header-title"><span class="hidden-xs">{3}</span>'),a.menu&&e.push(' <span class="caret"></span>'),e.push("</span>"),e.push("</a>"),a.menu&&a.menu.items&&(e.push('<ul class="dropdown-menu bs-right-menu">'),e.push("</ul>"))):e.push('<a class="bs-nav-link " href="#"  data-phoenix-href="click://{0}" ><span class="'+g.join(" ")+' {2}"></span></a>')}e.push("</li>"),a.id=d.allocID();var h=a.title;return h&&"object"==typeof h&&(h=h[c.currentLang]),$(d.format(e.join(""),b,a.id,f.iconClass(a.$icon),h||a.expression||""))},n=function(a,b){var d=document.createDocumentFragment(),e=$('<li><a href="#"></a><li>').get(0);a.menu.items.forEach(function(b,g){b.$pattern&&(a.menu.items[g]=l(b),b=a.menu.items[g]);var h=e.cloneNode(!0),i=h.firstChild;if(f.attr(i,"data-phoenix-href","click://"+a.$index+"/"+g),b.icon){var j=document.createElement("span");j.className=f.iconClass(b.icon),f.append(i,j)}var k=b.title;"object"==typeof b.title&&(k=b.title[c.currentLang]),f.text(i," "+(k||"Error: title not defined")),f.append(d,h)}),f.append(b,d)},o=12,p=function(){function b(a,b){this.init(a,b)}return b.prototype.init=function(a,b){var c=this;c.title="",c._ignoreClick=!1,c.leftButtonsSpace=0,c.rightButtonsSpace=0,c.$element=null,c.$buttons=[],c.options=b||{},c.page=g.Page(),c.title=i.title||"";var d=i.configuration,e=d&&d.header?d.header:{};if(c.options.showOnDisconnected=e.alwaysShow,e.logo){var f={$isHidden:!1,$type:"logo"},j="";"string"==typeof e.logo?j=e.logo:(j=e.logo.style,f.link=e.logo.link),f.$className=j,c.$buttons.push(f)}e.buttons&&e.buttons.before&&e.buttons.before.forEach(function(a){c.$buttons.push({$icon:a.icon,right:a.right,auth:a.auth,link:a.link,title:a.title})}),c.options.backButton&&c.$buttons.push({$icon:"chevron-left",$isHidden:!c.page.props.$hasBack,$type:"back",link:{$back:!0}}),c.options.leftMenuButton&&c.$buttons.push({auth:e.authLeftMenu,$isHidden:!0,$icon:"bars",$type:"menuleft",$parent:c.options.leftMenuPlace}),c.options.disconnectButton&&(e.userMenu?c.$buttons.push({$icon:"user",iconStyle:"$icon-normal",right:!0,auth:!0,menu:$.extend(!0,{},e.userMenu),expression:e.userMenu.expression||"John Doe",$type:"user"}):c.$buttons.push({$icon:"power-off",right:!0,auth:!0,$type:"disconnect",link:{$logout:!0}})),h.release||c.$buttons.push({$icon:"pencil",right:!0,auth:!0,$type:"authoring",link:{$authoring:!0}}),c.options.rightMenuButton&&c.$buttons.push({auth:!0,$isHidden:!0,$icon:"ellipsis-v",$type:"menuright",$parent:c.options.rightMenuPlace}),c.options.topMenuButton&&c.$buttons.push({auth:!0,$isHidden:!0,$icon:"chevron-down",$type:"menutop",right:!0,$parent:c.options.topMenuPlace}),e.buttons&&e.buttons.after&&e.buttons.after.forEach(function(a){c.$buttons.push({$icon:a.icon,right:a.right,auth:a.auth,link:a.link,title:a.title})}),c.page.addChild("header",c),c.setData(a)},b.prototype.setData=function(a){a=a||{}},b.prototype.buttonByType=function(a){for(var b=this,c=0,d=b.$buttons.length;d>c;c++){var e=b.$buttons[c];if(e.$type==a)return e}return null},b.prototype._createButtons=function(){var a=this;if(a.$element){var b=a.$element.get(0),c=f.query(b,".header_left_buttons"),d=f.query(b,".header_right_buttons");a.$buttons.forEach(function(a,b){a.$index=b;for(var e=m(a,b),g=a.right?d:c,h=0,i=e.length;i>h;h++)f.append(g,e.get(h))})}},b.prototype._updateButtons=function(){var a=this;if(a.$element){var b=a.page.props.$user&&a.page.props.$user.connected,c=o,e=o,g=a.$element.get(0);a.$buttons.forEach(function(h){var i=f.find(g,h.id);if(h.$isHidden||!b&&h.auth)f.addClass(i,"bs-none");else{if("user"===h.$type){var j=d.execAngularExpression(h.expression,a.page.props.$user.credentials);if(j!=h.title){h.title=j;var k=f.query(i,".bs-icon-header-title");k&&f.text(k.firstChild,j)}}f.removeClass(i,"bs-none"),h.right?e+=f.offset(i).width:c+=f.offset(i).width}}),a.leftButtonsSpace==c&&a.rightButtonsSpace==e||(a.leftButtonsSpace=c,a.rightButtonsSpace=e,a._updateTitleSpaceMargins())}},b.prototype._updateTitleSpaceMargins=function(){var a=this;if(a.$element){var b=a.$element.get(0),c=f.query(b,".header_title");c.style.marginLeft=a.leftButtonsSpace+"px",c.style.marginRight=a.rightButtonsSpace+"px"}},b.prototype.inPopup=function(a){var b=this;if(b._ob){var c=f.find(b.$element.get(0),b._ob.id);return f.isChildOf(c,a)}return!1},b.prototype.hide=function(b){var c=this;if(c._ob){var d=f.find(c.$element.get(0),c._ob.id);a.dom.removeClass(d.lastChild,"bs-block"),c._ob=null}},b.prototype._openPopup=function(a){var b=this;b.page.setPopup(b),b._ob=a;var c=f.find(b.$element.get(0),a.id);f.addClass(c.lastChild,"bs-block")},b.prototype._executeLink=function(a,b){var c=this;if(a.menu){var d=f.find(c.$element.get(0),a.id);if(d&&d.lastChild&&(d.lastChild.childNodes.length||n(a,d.lastChild)),!(b>=0)){if(c._ob){if(c._ob===a)return void c.page.setPopup(null);c.page.setPopup(null)}if(d&&d.lastChild){var e=d.lastChild;e.style.minWidth=Math.max(f.offset(d).width,160)+"px"}return c._openPopup(a)}var g=a.menu.items[b];g.link&&j.execLink(g.link,j.context(),null),c.page.setPopup(null)}if(a.link)return j.execLink(a.link,j.context(),null);if(["menuleft","menuright","menutop","menubottom"].indexOf(a.$type)>=0&&a.$parent&&c.page){var h=c.page.childByType("menu-"+a.$type.substring(4));h&&h.show($(f.find(null,a.$parent)))}},b.prototype._onresize=function(){var a=this;a.$element&&a._updateButtons()},b.prototype._setEvents=function(){var a=this,b=a.$element.get(0);a.$element.on("mousedown",function(c){var d=j.isCustomLink(b,c,!0);if(d&&"click"==d.protocol){var e=d.value.substring("click://".length).split("/"),f=(e.length>1?parseInt(e[1],10):-1,a.$buttons[parseInt(e[0],10)]);if(f&&["menuleft","menuright","menutop","menubottom"].indexOf(f.$type)>=0&&f.$parent&&a.page){var g=a.page.childByType("menu-"+f.$type.substring(4));a.page.popup===g&&(a._ignoreClick=!0)}}}),a.$element.on("click",function(c){var d=j.isCustomLink(b,c);if(a._ignoreClick)return void(a._ignoreClick=!1);if(d&&"click"===d.protocol){var e=d.value.substring("click://".length).split("/"),f=e.length>1?parseInt(e[1],10):-1,g=a.$buttons[parseInt(e[0],10)];if(a._executeLink(g,f),g&&"logo"===g.$type){var h=document.activeElement;h&&h.blur()}}}),$(window).on("resize.header",function(){clearTimeout(a._doResize),a._doResize=setTimeout(a._onresize.bind(a),100)})},b.prototype.onPageChange=function(a,b){var c,d=this;switch(a){case"$title":d.title=b||i.title||"",d._renderTitle();break;case"$hasBack":d.options.backButton&&(c=d.buttonByType("back"),c&&c.$isHidden!=!b&&(c.$isHidden=!b,d._updateButtons()));break;case"$user":d._auth(),d._updateButtons();break;case"$menuleft":d.options.leftMenuButton&&(c=d.buttonByType("menuleft"),c&&c.$isHidden==b&&(c.$isHidden=!b,d._updateButtons()));break;case"$menutop":d.options.topMenuButton&&(c=d.buttonByType("menutop"),c&&c.$isHidden==b&&(c.$isHidden=!b,d._updateButtons()))}},b.prototype._removeEvents=function(){var a=this;a.$element.off("mousedown"),a.$element.off("click"),$(window).off("resize.header")},b.prototype.renderButtons=function(){var a=this;a._createButtons(),a._updateButtons(),d.nextTick(function(){})},b.prototype._renderTitle=function(){var a=this;if(a.$element){var b=a.$element.get(0),c=f.query(b,".header_title");f.text(c,a.title||"")}},b.prototype._auth=function(){var a=this;if(a.$parent){var b=a.$parent.get(0),c=a.$element.get(0),d=a.page.props.$user&&a.page.props.$user.connected;d?(f.addClass(b,"bs-body"),f.removeClass(c,"bs-none")):a.options.showOnDisconnected?(f.addClass(b,"bs-body"),f.removeClass(c,"bs-none")):(f.removeClass(b,"bs-body"),f.addClass(c,"bs-none"))}},b.prototype.render=function(a){var b=this;if(a&&!this.$element){this.$element=k();var c=i.configuration,e=c&&c.header?c.header:{},g=b.$element.get(0),h=f.query(g,".header_title");e.uppercase&&f.addClass(h,"bs-transform-uppercase"),e.align&&f.addClass(h,"align-"+e.align),b._renderTitle(),b.renderButtons();var j=a.get(0);b.options.replaceParent&&(j=j.parentNode),b.$parent=$(j),b._auth(),b.options.replaceParent?a.replaceWith(b.$element):a.append(b.$element),b._setEvents(),d.nextTick(function(){b._onresize()})}},b.prototype.destroy=function(){var a=this;d.log("Header Destroy","destroy"),this.$parent=null,a.$element&&(a._removeEvents(),this.$element=null),a.page&&(a.page.removeChild(a),a.page=null)},b}();b.Header=p}(b=a.ui||(a.ui={}))}(Phoenix||(Phoenix={}));
//# sourceMappingURL=header.js.map
var Phoenix;!function(a){var b;!function(b){var c=a.utils,d=a.dom,e=a.locale,f=a.$mem,g=a.link,h=b,i=a.customData,j=a.render,k=["<div>",'   <div class="bs-lv-search bs-none">',"        <div>",'           <div class="input-group input-group-lg">','               <input type="text" class="form-control bs-lv-search-input" placeholder="{0}">','               <span class="input-group-btn">','                   <button class="bs-button btn btn-default bs-lv-search-btn" type="button"><span class="'+d.iconClass("search")+'"></span></button>',"               </span>","           </div>","        </div>","   </div>","   {1}",'   <center><nav class="bs-lv-pagination">',"   </nav></center>",'   <center><div class="bs-lv-nodata bs-none">'+e.listView.search.Nodata+"</div></center>","</div>"],l='<div class="bs-lv-content list-group"></div>',m='<a draggable="false" href="#" class="list-group-item"></a>',n="<div></div>",o='<div class="list-group-item"></div>',p=function(a,b){return a=a||e.listView.search.Search,$(c.format(k.join(""),a,b))},q=function(a,b,c){if(b!=c&&!(0>b&&0>c)){var e=d.query(a,".bs-lv-content"),f=e.childNodes.length;b>=0&&f>b&&d.removeClass(e.childNodes[b],"active"),c>=0&&f>c&&d.addClass(e.childNodes[c],"active")}},r=function(a,b,c,e,h,k){var l=c.customRender?i.get(c.customRender):null;l||(l=j.get(c.context,"widget.listview.item"));var p=d.query(a,".bs-lv-content"),q=c.empty?null:c.basic?$(n).get(0):c.noLink?$(o).get(0):$(m).get(0),r=b?b.length:0,s=document.createDocumentFragment();q&&c.noBorders&&d.addClass(q,"no-border"),q&&c.inline&&(d.addClass(q,"no-radius"),d.addClass(q,"no-y-border"));for(var t={$item:null,$url:g.search(null,!1),$mem:f},u=0;r>u;u++){var v=b[u];if(q){var w=q.cloneNode(!0);if(!h||!h["default"]||c.basic||c.noLink||c.select||(t.$item=v,w.href=g.hashLink(h["default"],t,null)),l){var x=[];l(x,e,c,u,v,k),w.appendChild($(x.join("")).get(0))}s.appendChild(w)}else if(l){var x=[];l(x,e,c,u,v,k);for(var y=$(x.join("")),z=0,A=y.length;A>z;z++)s.appendChild(y.get(z))}}return $(p).empty(),p.appendChild(s),a},s=function(a){return a.documents=a.documents||[],a.count=a.count,a.dataCount=a.documents.length,a.skip=a.skip||0,a.pageSize=a.pageSize||a.documents.length||20,a},t=function(a,b){return a.search=b.search||!1,a.inline=b.inline||!1,a.pagerSize=b.pagerSize||"lg",b.select&&(a.select=!0),b.link&&(a.link=b.link),a.basic=b.basic||!1,a.empty=b.empty||!1,a.noLink=b.noLink||!1,a.pagination=b.pagination||!1,a.customRender=b.customRender||"",a.customRootRender=b.customRootRender||"",a},u=function(){function a(a,b,c){var d=this,e=a;e.data=e.data||{},b=b||{},b.dataset=b.dataset||a.data.dataset||"items",b.dataType=b.dataType||"odata",d.options=t(b,a.data),d["_checkData"+b.dataType](e.data,b),d.data=e.data,d.selectedIndex=-2,d.props={},d._defineProps(),d.module=c,d.module.onDSChanged=d._afterDatasetChanged.bind(d),d.pager=new h.Pager({size:d.options.pagerSize,selectPage:d._onselectPage.bind(d)})}return a.prototype._defineProps=function(){var a=this;Object.defineProperty(a.props,"items",{get:function(){return a.data.ds[a.options.dataset].documents},set:function(b){a.data.ds[a.options.dataset].documents=b,a._notifyChange("items")},enumerable:!0})},a.prototype._afterDatasetChanged=function(a){var b=this;if(a.indexOf(b.options.dataset)>=0){if(b.options.beforeRemove&&b.options.beforeRemove(),b.options.select){var c=b.module.datasets[b.options.dataset];c&&(b.selectedIndex=c.selectedIndex)}b._renderItems(!0),b.$element&&b.options.select&&q(b.$element.get(0),-1,b.selectedIndex),b._updateNavigation()}},a.prototype._extractContextodata=function(){var a=this,b=a.data.ds[a.options.dataset]||{},c={};return b.dataCount&&(c.$dataCount=b.dataCount),b.count&&(c.$count=b.count),b.skip&&(c.$skip=b.skip),b.pageSize&&(c.$top=b.pageSize),b.searchText&&(c.$searchText=b.searchText),c},a.prototype._navigationState=function(){var a=this,b={currentPage:-1,totalPages:0};if(!a.options.pagination)return b;if("odata"==a.options.dataType){var c=a._extractContextodata();c.$skip=c.$skip||0,c.$count=c.$count||0,c.$dataCount=c.$dataCount||0,c.$top=c.$top||0,b.totalPages=c.$top<1?1:Math.ceil(c.$count/c.$top),b.currentPage=c.$top<1?1:Math.ceil(c.$skip/c.$top)+1}return b},a.prototype._notifyChange=function(a){},a.prototype._checkDataodata=function(a,b){a.ds=a.ds||{},a.ds[b.dataset]=a.ds[b.dataset]||{},s(a.ds[b.dataset])},a.prototype._removeEvents=function(){var a=this;a.$element.off("click keyup")},a.prototype._doSearch=function(){var a=this;if(a.module&&a.$element&&a.options.search){var b=a.$element.get(0),c=d.query(b,".bs-lv-search-input");if(c){var e=a["_extractContext"+a.options.dataType]();if(e.$searchText!=c.value){e.$skip=0,e.$searchText=c.value;var f=d.query(b,".bs-lv-nodata");f&&d.addClass(f,"bs-none"),a.module.execDataSet(a.options.dataset,e,function(b){b&&f&&a.props.items&&0==a.props.items.length&&d.removeClass(f,"bs-none")},null,!0)}}}},a.prototype._setEvents=function(){var a=this;a.$element&&a.$element.on("click",function(b){var c=b.target,e=this,f=d.query(e,".bs-lv-content"),h=d.query(e,".bs-lv-search-btn"),i=g.isCustomLink(e,b);if(i)return g.execCustomProtocol(i,a.module.ds_context(),{links:a.module.links},null);for(;c!=e;){if(c.href){var j=d.attr(c,"href");"#"===j&&(b.preventDefault(),b.stopPropagation())}if(c==h){a._doSearch();break}if(c.parentNode==f){var k=d.attr(c,"data-index");void 0===k&&(k=Array.prototype.indexOf.call(f.children,c)),a.options.select?a._selectItem(k):a.options.clickItem&&a._clickItem(b.target,c,k);break}c=c.parentNode}}).on("keyup",function(b){13==b.keyCode&&a._doSearch()})},a.prototype._renderItems=function(a){var b=this;if(b.$element){var c=b.data.ds.view?b.data.ds.view.$view:null,e=b.data.ds[b.options.dataset].documents;b.options.beforeRenderItems&&b.options.beforeRenderItems(e),r(b.$element.get(0),e,b.options,b.data.$type,b.module.links,c),b.options.afterRenderItems&&b.options.afterRenderItems(e,d.query(b.$element.get(0),".bs-lv-content")),b.options.beforeAdd&&b.options.beforeAdd(b.$element,a)}},a.prototype._clickItem=function(a,b,c){var d=this;d.props.items&&c>=0&&c<d.props.items.length&&d.options.clickItem&&d.options.clickItem(a,b,d.props.items[c],c),d.props.items[d.selectedIndex]},a.prototype._selectItem=function(a){var b=this;if(b.selectedIndex!=a&&(b.$element&&q(b.$element.get(0),b.selectedIndex,a),b.selectedIndex=a,b.module&&b.options.dataset)){var c=b.module.datasets[b.options.dataset];c&&(c.selectedIndex=a),b.module.ds_select(b.options.dataset,b.selectedIndex>=0?b.props.items[b.selectedIndex]:null)}},a.prototype._onselectPage=function(a){var b=this;switch(a){case"next":b.next();break;case"prev":b.previous();break;case"first":b.moveToPage(1);break;case"last":b.moveToPage(b.pager.props.totalPages);break;default:b.moveToPage(a)}},a.prototype.moveToPage=function(a){var b=this,c=b["_extractContext"+b.options.dataType]();c.$skip=(a-1)*(c.$top||0),b.module.execDataSet(b.options.dataset,c,null,null,!0)},a.prototype.next=function(){var a=this,b=a["_extractContext"+a.options.dataType]();b.$skip=(b.$skip||0)+(b.$top||0),a.module.execDataSet(a.options.dataset,b,null,null,!0)},a.prototype.previous=function(){var a=this,b=a["_extractContext"+a.options.dataType]();b.$skip=Math.max(0,(b.$skip||0)-(b.$top||0)),a.module.execDataSet(a.options.dataset,b,null,null,!0)},a.prototype._updateNavigation=function(){var a=this,b=a._navigationState();a.pager.props.totalPages=b.totalPages,a.pager.props.currentPage=b.currentPage},a.prototype.render=function(a){var b=this;if(!b.$element){var c=b.options.customRootRender?i.get(b.options.customRootRender):null;b.$element=p(!1,c?c():l);var e=b.$element.get(0);if(b.options.search){var f=d.query(e,".bs-lv-search");f&&d.removeClass(f,"bs-none")}var g=d.query(e,".bs-lv-pagination");if(b.pager.render($(g)),b._setEvents(),b.contentRender=j.get(this.options.context,"widget.content.control.listview."+b.data.$type),b.options.select){var h=b.module.datasets[b.options.dataset];h&&(b.selectedIndex=h.selectedIndex)}b._renderItems(!1),b.$element&&b.options.select&&q(b.$element.get(0),-1,b.selectedIndex),b._updateNavigation()}return a&&(b.options.replaceParent?a.replaceWith(b.$element):a.append(b.$element)),b.$element},a.prototype.destroy=function(){var a=this;a.pager&&(a.pager.destroy(),a.pager=null),a.module&&(a.module.onDSChanged=null,a.module=null),a.contentRender&&(a.contentRender.destroy(),a.contentRender=null),a.$element&&a._removeEvents(),a.$element=null},a}();b.ListView=u,j.register("javascript","widget.content.control.listview",u)}(b=a.ui||(a.ui={}))}(Phoenix||(Phoenix={}));
//# sourceMappingURL=listview.js.map
var Phoenix;!function(a){var b;!function(a){var b=function(){function a(a,b){var c=this;c.options=a||{},c.callback=b||null,c.map=null,c.markerList=[]}return a.prototype.newMap=function(){return new a},a.prototype.getLatLng=function(a,b){},a.prototype.initMap=function(a,b){},a.prototype.setMapCenter=function(a,b,c,d){},a.prototype.addMarker=function(a,b,c,d,e){},a.prototype.removeMarker=function(a){},a.prototype.addMarkerByAddress=function(a){},a}();a.Map=b}(b=a.ui||(a.ui={}))}(Phoenix||(Phoenix={}));
//# sourceMappingURL=basemap-controller.js.map
var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Phoenix;!function(a){var b;!function(b){var c=(a.bootstrap4,window.google),d=function(a){function b(b,c){a.call(this,b,c)}return __extends(b,a),b.prototype.getLatLng=function(a,b){function d(c){c?b(c):g==a.length-1?b(null):(g++,e(a[g],d))}function e(a,b){f.geocode({address:a},function(d,e){return e===c.maps.GeocoderStatus.OK?b({latitude:d[0].geometry.location.lat(),longitude:d[0].geometry.location.lng(),libelle:a}):void b(null)})}var f=new c.maps.Geocoder;if(f){Array.isArray(a)||(a=[a]);var g=0;e(a[0],d)}},b.prototype.initMap=function(a,b){var d=this;if(a)return b=b||{},b={zoom:b.zoom||16,mapTypeId:b.type||c.maps.MapTypeId.TERRAIN,scrollwheel:!1},d.map=new c.maps.Map(a,b)},b.prototype.setMapCenter=function(a,b,d,e){if(a){var f=new c.maps.LatLng(b,d);a.setCenter(f)}},b.prototype.addMarker=function(a,b,d,e){var f=this;if(a){e=e||{};var g=new c.maps.LatLng(b,d),h=new c.maps.Marker({position:g,map:a,title:e.message||null});if(e.message){var i=new c.maps.InfoWindow({content:e.message,size:new c.maps.Size(100,100)});c.maps.event.addListener(h,"click",function(){i.open(a,h)})}return f.markerList[0]?f.markerList[0]=h:f.markerList.push(h),h}},b.prototype.removeMarker=function(a){a&&a.setMap(null)},b.prototype.addMarkerByAddress=function(a){var b=this;b.getLatLng(a,function(a){return a?(b.map&&(b.markerList[0]&&b.removeMarker(b.markerList[0]),b.setMapCenter(b.map,a.latitude,a.longitude),b.addMarker(b.map,a.latitude,a.longitude,{message:"<b>Adresse :</b><br />"+a.libelle})),void(b.callback&&b.callback(a))):b.callback&&b.callback(null)})},b}(b.Map);b.GoogleMaps=d,b.googleMaps=function(a,b){return c=window.google,new d(a,b)}}(b=a.ui||(a.ui={}))}(Phoenix||(Phoenix={}));
//# sourceMappingURL=googlemap-controller.js.map
var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Phoenix;!function(a){var b;!function(b){var c=(a.bootstrap4,window.google),d=window.L,e=function(a){function b(b,c){a.call(this,b,c)}return __extends(b,a),b.prototype.getLatLng=function(a,b){function d(c){c?b(c):g==a.length-1?b(null):(g++,e(a[g],d))}function e(a,b){f.geocode({address:a},function(d,e){return e===c.maps.GeocoderStatus.OK?b({latitude:d[0].geometry.location.lat(),longitude:d[0].geometry.location.lng(),libelle:a}):void b(null)})}var f=new c.maps.Geocoder;if(f){Array.isArray(a)||(a=[a]);var g=0;e(a[0],d)}},b.prototype.initMap=function(a,b){var c=this;if(a){b=b||{};var e=d.map(a,{center:[0,0],zoom:b.zoom||16});return d.tileLayer(b.tile||"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw",{maxZoom:b.maxZoom||18,attribution:b.attribution||'&copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors',id:b.id||"mapbox.streets"}).addTo(e),c.map=e}},b.prototype.setMapCenter=function(a,b,c,e){if(a){var f=d.latLng(b,c);a.setView(f)}},b.prototype.addMarker=function(a,b,c,e){var f=this;if(a){e=e||{};var g=d.marker([b,c]).addTo(a);return e.message&&g.bindPopup(e.message),f.markerList[0]?f.markerList[0]=g:f.markerList.push(g),g}},b.prototype.removeMarker=function(a){var b=this;a&&b.map&&(a.closePopup(),b.map.removeLayer(a))},b.prototype.addMarkerByAddress=function(a){var b=this;b.getLatLng(a,function(a){return a?(b.map&&(b.markerList[0]&&b.removeMarker(b.markerList[0]),b.setMapCenter(b.map,a.latitude,a.longitude),b.addMarker(b.map,a.latitude,a.longitude,{message:"<b>Adresse :</b><br />"+a.libelle})),void(b.callback&&b.callback(a))):b.callback&&b.callback(null)})},b}(b.Map);b.OpenStreetMap=e,b.openStreetMap=function(a,b){return c=window.google,d=window.L,new e(a,b)}}(b=a.ui||(a.ui={}))}(Phoenix||(Phoenix={}));
//# sourceMappingURL=openstreetmap-controller.js.map
var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Phoenix;!function(a){var b;!function(b){var c=a.link,d=a.dom,e={render:{image:function(a){return['<div class="bs-menutop-menu-image">','<a data-phoenix-href="click://'+a.$index+'/default" href="#">','<div><i class="glyphicon glyphicon-'+a.$links["default"].$icon+'" style="font-size:40px;"></i></div>',"<div>"+a.$title+"</div>","</a>","</div>"]}}},f=function(a){function b(b,f){a.call(this,b,f),this._render={renderContent:function(){return $('<div class="bs-top-menu-wrapper"></div>')},renderItems:function(){var a=this,b=document.createDocumentFragment(),c=$('<div class="bs-menutop-menus" ></div>'),f=$('<div class="bs-menutop-menu"><center></center><div class="bs-menutop-item-selected"></div></div>').get(0);a.items&&a.items.forEach(function(a,c){var g=f.cloneNode(!0),h=d.query(g,"center");a.$index=c,e.render[a.$type]?h.appendChild($(e.render[a.$type](a).join("")).get(0)):h.appendChild($('<div class="bs-menutop-menu-not">Invalid menu definition.</div>').get(0)),d.addClass(g,"bs-menutop-item-"+c),b.appendChild(g)}),c.get(0).appendChild(b),a.$element=$('<div style="padding-right:15px;"></div>');var g=$('<div style="overflow-x:auto; width: 100%;"></div>').get(0);return g.appendChild(c.get(0)),a.$element.get(0).appendChild(g),a.$element.get(0).appendChild($('<div class="bs-menutop-direction"><i class="glyphicon glyphicon-chevron-right"></i></div>').get(0)),a._onPageChanged(),a.$element},copyMenuItemData:function(a,b){a.$links=b.$links,a.$type=b.$type},_executeLink:function(a,b){var d=a.$links[b];c.execLink(d,c.context(),null)},_onPageChanged:function(){var a=this;if(a.$element){var b=a.$element.get(0);if(a.items){var e=d.query(b,".bs-menutop-item-selected-bg");e&&d.removeClass(e,"bs-menutop-item-selected-bg"),a.items.forEach(function(e,f){var g=c.pageName(e.$links["default"]);if(g!=a.page.currentPage());else{var h=d.query(b,".bs-menutop-item-"+e.$index);if(h){var i=d.query(h,".bs-menutop-item-selected");i&&d.addClass(i,"bs-menutop-item-selected-bg")}}})}}},_menuShowed:function(){var a=this;if(a.$element){var b=a.$element.get(0);a.items&&a.items.forEach(function(e,f){var g=c.pageName(e.$links["default"].$page);if(g==a.page.currentPage()){var h=d.query(b,".bs-menutop-item-"+e.$index);return void(h&&h.scrollIntoView(!0))}})}}}}return __extends(b,a),b.prototype._initOptions=function(a){a=a||{},a.autoClose=!1,a.replaceParent=!0},b}(b.MenuBase);b.Menutop=f}(b=a.ui||(a.ui={}))}(Phoenix||(Phoenix={}));
//# sourceMappingURL=menu-top.js.map
var Phoenix;!function(a){var b;!function(b){var c=a.WidgetUtils,d=a.utils,e=function(){function a(a,b){var c=this;c._options=a||{},c._options.id=c._options.id||d.allocID(),c._data=b||{}}return a.prototype.render=function(a){var b=this;if(!b.$element){var d=[];c.widgetTitle(d,b._options.id,b._data,null,!0),b.$element=$(d.join(""))}a&&(b._options.replaceParent?a.replaceWith(b.$element):a.append(b.$element))},a.prototype.destroy=function(){var a=this;a.$element=null,a._options=null,a._data=null},a}();b.ModuleTitle=e}(b=a.ui||(a.ui={}))}(Phoenix||(Phoenix={}));
//# sourceMappingURL=module-title.js.map
var Phoenix;!function(a){var b;!function(b){var c=a.ulocale,d=a.utils,e=(a.ajax,a.dom),f=a.link,g=a.render,h=function(){function a(a){var c=this;b.constructXRangeType(Highcharts),c._id=d.allocID(),c.data=a}return Object.defineProperty(a.prototype,"data",{get:function(){return this._data},set:function(a){var b=this;this._data=a,b._constructConfig(),b._chart&&b._internalReflow(!0)},enumerable:!0,configurable:!0}),a.prototype._onResize=function(){var a=this;a._internalReflow(!1)},a.prototype.destroy=function(){var a=this;a.$element&&(a.$element.off("click"),a.$element=null),a._config=null,a._chart&&(a._chart.destroy(),a._chart=null,$("#"+a._id).remove(),a._id=null),a._resizeHnd&&($(window).off("phoenix-resize",a._resizeHnd),a._resizeHnd=null)},a.prototype.drawLegend=function(a){var b=this;b._chart.series.forEach(function(b){var c=b.options;c.dataLabels.enabled=a,b.update(c)})},a.prototype._internalReflow=function(a){var b=this;a?b.renderChart():b._chart.reflow(),b._renderLabels()},a.prototype.render=function(a){var b=this;b._resizeHnd||(b._resizeHnd=function(){b._onResize()},$(window).on("phoenix-resize",b._resizeHnd)),b.$element||(b.$element=$(d.format('<div id="{0}" class=""></div>',b._id)),b.$element.on("click",function(a){var c=a.target,d=e.text(c);if(d){var g=b._getLinkByTitle(d);g&&"object"==typeof g&&(b.cbDelegateExecuteLink?b.cbDelegateExecuteLink(g):f.execLink(g,{},null))}}),a.append(b.$element)),b.renderChart()},a.prototype.renderChart=function(){var b=this,c=a.HEIGHT_FIX_PLANNING+b._data.boxes.length*(b._data.rows.length*a.HEIGHT_FIX_ROW+a.HEIGHT_FIX_BOX);b.$element.css("height",c+"px"),Highcharts.setParams(a.HEIGHT_FIX_BOX,a.HEIGHT_FIX_ROW,b._data.rows.length),Highcharts.setOptions({lang:{months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],shortMonths:["Jan","Fév","Mars","Avr","Mai","Juin","Juil","Août","Sept","Oct","Nov","Déc"]}}),b._chart=new Highcharts.Chart(b._config),b._renderLabels()},a.prototype._renderLabels=function(){var a=this;a._absoluteLabels&&a._absoluteLabels.forEach(function(a){a.remove()}),a._absoluteLabels=[];for(var b in a._chart.yAxis[0].ticks){var c=a._chart.yAxis[0].ticks[b];if(c.label){var d=c.label.xy.y+90,e=a._config.yAxis.categories[parseInt(b)];c.label.hide();var f=$('<div style="position: absolute; top: '+d+'px; left:15px; cursor: pointer;z-index: 0;">'+e+"</div>"),g=$('<div style="position: absolute; top: '+d+'px; left:15px; cursor: pointer;z-index:2;background-color:transparent;color:transparent;">'+e+"</div>");a._absoluteLabels.push(f),a._absoluteLabels.push(g)}}a._absoluteLabels.forEach(function(b){a.$element.append(b)});var h=a.$element.get(0).firstElementChild;h.style.zIndex=1},a.prototype._getRowName=function(a){var b=this,c="";return b._data.rows.forEach(function(b){b.id==a&&(c=b.title)}),c},a.prototype._getLinkByTitle=function(a){var b=this,c="";return b._data.boxes.forEach(function(b){b.link&&b.title==a&&(c=b.link)}),c},Object.defineProperty(a.prototype,"emptyConf",{get:function(){var b=this;return b._emptyConf={chart:{ignoreHiddenSeries:!1,backgroundColor:null},title:{text:null},legend:{enabled:!1},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%b %y"},plotLines:[{color:a.PLOT_LINE_COLOR,width:3,value:new Date,zIndex:4}],opposite:!0,minRange:1e3},yAxis:{title:"",categories:[],labels:{align:"left",x:0,y:0,formatter:function(){return this.value}},showFirstLabel:!0,min:0,max:0,tickPosition:"outside"},tooltip:{formatter:function(){var a="%d/%m/%Y",b="<b>"+this.point.title+"</b>";return this.point.x&&(b+="<br/><b>"+Highcharts.dateFormat(a,new Date(this.point.x))),this.point.x2&&this.point.x!=this.point.x2&&(b+=" - "+Highcharts.dateFormat(a,new Date(this.point.x2))),this.point.x&&(b+="</b>"),b},hideDelay:100,backgroundColor:"white",followPointer:!1},plotOptions:{xrange:{dataLabels:{enabled:!1,formatter:function(){return this.point.legend},style:{fontWeight:"normal",textShadow:"0 0 1px contrast, 0 0 1px contrast"}},states:{hover:{enabled:!1}}}},scrollbar:{enabled:!1},credits:{enabled:!1},series:[{data:[],visible:!1}]},b._emptyConf},enumerable:!0,configurable:!0}),a.getMillisHour=function(){return 36e5},a.getMillisDay=function(){return 24*a.getMillisHour()},a.getMillisMonth=function(){return 30*a.getMillisDay()},a.getMillisYear=function(){return 12*a.getMillisMonth()},a.addMillis=function(a,b){return new Date(a.getTime()+b)},a.getInterval=function(b){return b<=3*a.getMillisYear()?a.getMillisMonth():a.getMillisYear()},a.addDays=function(a,b){var c=new Date(a.valueOf());return c.setDate(c.getDate()+b),c},a.prototype.zoom=function(b){var c,d=this;c=a.getMillisDay()*b;var e=new Date,f=a.addDays(new Date(d._chart.xAxis[0].dataMin),-a.ADD_DAYS_SECURE),g=a.addDays(new Date(d._chart.xAxis[0].dataMax),a.ADD_DAYS_SECURE),h=g.valueOf()-f.valueOf(),i=100;b>0&&(i=h/c*100),100>i&&(i=100),d.$element.css("width",i+"%");var j=!0;0>=b&&(j=!1),d._config.tooltip.followPointer=j;var k=0>c?h:c;d._chart.xAxis[0].options.tickInterval=a.getInterval(k),d._chart.xAxis[0].setExtremes(Date.UTC(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDay()),Date.UTC(g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDay())),d._internalReflow(!0);var l=0,m=parseInt(d.$element.css("width").replace("px","")),n=e.valueOf()-f.valueOf();if(n>0){l=n/h*m;var o=c/2/h*m;l-=o}d.$element.parent().parent().scrollLeft(l)},a.prototype._constructConfig=function(){var b=this;b._config=b.emptyConf,b._data.boxes.forEach(function(a){b._config.yAxis.categories.push(a.title)}),b._config.yAxis.max=b._data.boxes.length-1,b._config.yAxis.labels.y=-(b._data.rows.length*a.HEIGHT_FIX_ROW+a.HEIGHT_FIX_BOX/2-a.BOX_TITLE_PX)/2,b._config.yAxis.labels.formatter=function(){var c=b._getLinkByTitle(this.value),d="font-size:"+a.BOX_TITLE_PX+"px;font-weight:bold;cursor:pointer;";return"string"==typeof c?'<p><a href="'+c+'" style="'+d+'">'+this.value+"</a></p>":'<p style="'+d+'">'+this.value+"</p>"},b._config.chart?b._config.chart.renderTo=b._id:b._config.chart={renderTo:b._id};var d={};b._data.boxes.forEach(function(e,f){e.rows.forEach(function(e,g){e.segments.sort(function(a,b){return a.dtStart>b.dtStart?1:-1}),e.segments.forEach(function(g,h){var i=Math.random(),j=g.height?g.height:"default",k=g.color,l=g.borderColor?g.borderColor:a.BORDER_COLOR;"point"==g.style&&(l="black"),d[g.style]||(d[g.style]={}),d[g.style][j]||(d[g.style][j]={}),d[g.style][j][e.id]||(d[g.style][j][e.id]=[]),g.color2&&(k={linearGradient:a.LINEAR_GRADIENT,stops:[[0,g.color],[1,g.color2]]}),d[g.style][j][e.id].push({title:g.title,legend:g.legend||g.title,x:c.parseISODateAsUTC(g.dtStart)+i,x2:c.parseISODateAsUTC(g.dtEnd?g.dtEnd:g.dtStart)+i,y:b._data.boxes.length-(f+1),color:k,borderColor:l})})})});for(var e in d)for(var f in d[e])for(var g in d[e][f]){var h=0,i="small"==f?a.SERIE_STYLE_SMALL_HEIGHT:a.SERIE_STYLE_HEIGHT,j=a.BORDER_WIDTH,k=a.Z_INDEX_DEFAULT;"default"==e&&(h=a.BORDER_RADIUS_DEFAULT),"point"==e?(j=3,h=a.BORDER_RADIUS_DEFAULT,i=a.SERIE_STYLE_SMALL_HEIGHT,k=a.Z_INDEX_POINT):"line"==e&&(k=a.Z_INDEX_LINE),b._config.series.push({type:"xrange",dataType:e,stacking:!0,name:b._getRowName(g),z:g,data:d[e][f][g],borderWidth:j,borderRadius:h,pointWidth:i,zIndex:k})}},a.HEIGHT_FIX_PLANNING=100,a.HEIGHT_FIX_BOX=30,a.HEIGHT_FIX_ROW=30,a.Z_INDEX_POINT=30,a.Z_INDEX_LINE=20,a.Z_INDEX_DEFAULT=10,a.LINEAR_GRADIENT={x1:0,y1:0,x2:1.2,y2:0},a.BORDER_COLOR="white",a.BORDER_WIDTH=1,a.BOX_TITLE_PX=12,a.SERIE_STYLE_HEIGHT=25,a.SERIE_STYLE_SMALL_HEIGHT=10,a.BORDER_RADIUS_DEFAULT=10,a.PLOT_LINE_COLOR="#5E6165",a.ADD_DAYS_SECURE=30,a}();b.PlanningChart=h,g.register("javascript","widget.content.control.planningchart",h)}(b=a.ui||(a.ui={}))}(Phoenix||(Phoenix={}));
//# sourceMappingURL=charts.control.js.map
var Phoenix;!function(a){var b;!function(a){function b(a){function b(a){var b={};return a.forEach(function(a){var c=a.y+"",d=b[c]=b[c]||[];if(a.offsetY=0,"point"!=a.style&&"line"!=a.style){var e=d.length?d[d.length-1]:null;e&&e.x2>a.x&&(a.offsetY=2)}d.push(a)}),b}if(!a.seriesTypes.xrange){var c,d,e,f=a.getOptions().plotOptions,g=a.seriesTypes.column,h=a.each;f.xrange=a.merge(f.column,{}),a.seriesTypes.xrange=a.extendClass(g,{type:"xrange",parallelArrays:["x","x2","y"],requireSorting:!1,animate:a.seriesTypes.line.prototype.animate,getColumnMetrics:function(){function a(){h(c.series,function(a){var b=a.xAxis;a.xAxis=a.yAxis,a.yAxis=b})}var b,c=this.chart;return a(),this.yAxis.closestPointRange=1,b=g.prototype.getColumnMetrics.call(this),a(),b},translate:function(){g.prototype.translate.apply(this,arguments);var f=this,h=f.xAxis,i=f.columnMetrics,j=b(f.points);Object.keys(j).forEach(function(b){var f=j[b],g=0;a.each(f,function(b){var f=h.translate(a.pick(b.x2,b.x+(b.len||0)))-b.plotX;g+=b.offsetY;var j=b.plotY-(c/2+e/2*d)+d/2;b.shapeArgs={x:b.plotX,y:j+parseInt(b.series.options.z+"")*d+3*c/4+i.offset+g,width:Math.max(f,i.width),height:i.width},b.tooltipPos[0]+=f/2,b.tooltipPos[1]-=i.width/2-parseInt(b.series.options.z+"")*d})})}}),a.wrap(a.Axis.prototype,"getSeriesExtremes",function(a){var b=this,c=Number.MIN_VALUE;a.call(this),this.isXAxis&&(h(this.series,function(a){"xrange"==a.stackKey&&h(a.x2Data||[],function(a,b){a>c&&(c=a)})}),c>Number.MIN_VALUE&&(b.dataMax=c))}),a.setParams=function(a,b,f){c=a,d=b,e=f}}}a.constructXRangeType=b}(b=a.ui||(a.ui={}))}(Phoenix||(Phoenix={}));
//# sourceMappingURL=xrange-type.js.map
var Phoenix;!function(a){var b;!function(b){var c=(a.utils,a.render),d=function(){function a(a,b){this.data=a||{},this.options=b||{}}return a.prototype.render=function(a){var b=this;return b.$element||(b.$element=$("<div></div>")),a&&(b.options.beforeAdd&&b.options.beforeAdd(b.$element),b.options.replaceParent?a.replaceWith(b.$element):a.append(b.$element)),b.$element},a.prototype.destroy=function(){var a=this;a.$element=null},a}();c.register("javascript","widget.content.control.test",d)}(b=a.ui||(a.ui={}))}(Phoenix||(Phoenix={}));
//# sourceMappingURL=phoenix.widgets.min.js.map