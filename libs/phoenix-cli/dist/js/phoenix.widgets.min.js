var Phoenix;!function(e){!function(t){var o=e.ulocale,n=e.locale,r=function(e){window.Highcharts&&window.Highcharts.setOptions&&window.Highcharts.setOptions({lang:{months:n.date.months,weekdays:n.date.weekdays,shortMonths:n.date.monthsShort,decimalPoint:n.number.decimal,thousandsSep:n.number.thousand,resetZoom:n.charts.resetZoom,resetZoomTitle:n.charts.resetZoomTitle,rangeSelectorZoom:n.charts.rangeSelectorZoom,rangeSelectorFrom:n.charts.rangeSelectorFrom,rangeSelectorTo:n.charts.rangeSelectorTo}})};t.translateHighcharts=function(){var e="";return function(){o.currentLang!=e&&(e=o.currentLang,r(o.currentLang))}}()}(e.ui||(e.ui={}))}(Phoenix||(Phoenix={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Phoenix;!function(e){!function(t){var o=e.utils,n=(e.dom,e.locale,e.$mem,e.link,t),r=e.customData,a=e.render,i=function(){function e(e,t,o,n,r){var a=this;e=e||{},a.formData=n||{$create:!0},a.options=e,a.layout=t,a.schema=o,a.module=r}return e.prototype.render=function(e){var t=this;if(!t.$element){var o={replaceParent:t.options.replaceParent,context:t.options.context,beforeAdd:t.options.beforeAdd,beforeRemove:t.options.beforeRemove,beforeSetModel:t.options.beforeSetModel,afterModelCreated:t.options.afterModelCreated,settingsHandler:t.options.onSettings,storageName:t.options.storageName,validators:t.options.validators,module:t.module},r=t.module&&t.module.data&&t.module.data.data&&t.module.data.data.ds&&t.module.data.data.ds.view?t.module.data.data.ds.view.$view:null;n.OpenForm(e,t.layout,t.schema,t.formData||{},r,t.action,o,function(e){t.form=e,t.$element=t.form.$element})}},e.prototype.destroy=function(){var e=this;e.form&&(e.form.destroy(),e.form=null),e.$element=null},e}();t.FormContainer=i,a.register("javascript","widget.content.control.form",i);var l=function(e){function n(n,a,i,l,s){var c=this;if(!a)throw"Form name is empty.";if(!i)throw"Meta name (schema) is empty.";if(!l)throw"Controller name is empty.";var u=r.get(l);if(!u)throw o.format('Controller not found "{0}". Use customData.register(controllerName, ctrlConfig).',l);t.formController2Options(n,u);var d=u.data?u.data():null;return c=e.call(this,n,a,i,d,s)||this,u.isFormController?c.action=u.modelChanged.bind(u):u.onModelChanged&&(c.action=u.onModelChanged.bind(u)),c}return __extends(n,e),n}(i);t.FormContainerController=l}(e.ui||(e.ui={}))}(Phoenix||(Phoenix={}));var Phoenix;!function(e){!function(t){var o=e.ulocale,n=e.utils,r=e.ajax,a=e.render,i=function(e,t,n){var r=new window.google.visualization.DataTable;r.addColumn("string","Id"),r.addColumn("string","Name"),r.addColumn("date","Start"),r.addColumn("date","End");for(var a=[],i=1,l=e.cols.length;i<l;i++){var s=new Array(4);s[0]=i+"",s[1]=e.cols[i].label;var c=e.rows[0][i];c="object"==typeof c?c.value:c,s[2]=c?o.parseISODate(c):null,c="object"==typeof(c=e.rows[1][i])?c.value:c,s[3]=c?o.parseISODate(c):null,a.push(s)}return t.timeline={showRowLabels:!1},t.colors=n.colors,r.addRows(a),r},l=function(e,t,n){var r="money"==n.valueType,a=new window.google.visualization.DataTable;e.titles=e.titles||{},e.rows=e.rows||[],a.addColumn("string",e.cols[0].label),a.addColumn("number",e.titles.seriesTitle||"");for(var i=[],l=1,s=e.cols.length;l<s;l++){for(var c=[e.cols[l].label,{v:0,f:""}],u=0,d=e.rows.length;u<d;u++){var p=e.rows[u][l];p&&(c[1].v+="object"==typeof p?p.value:p)}c[1].v=parseFloat(c[1].v.toFixed(6)),r&&(c[1].f=o.money(c[1].v,!0)),i.push(c)}return a.addRows(i),n.colors&&(t.slices={},n.colors.forEach(function(e,o){t.slices[o]={color:e}})),a},s=function(e,t,n){var r="money"==n.valueType,a=new window.google.google.visualization.DataTable,i=[];e.titles=e.titles||{},e.rows=e.rows||[];for(var l=0,s=e.cols.length;l<s;l++)a.addColumn(l?"number":"string",e.cols[l].label);for(var c=0,u=e.rows.length;c<u;c++){for(var d=new Array(e.cols.length),l=0,s=e.cols.length;l<s;l++){var p=e.rows[c][l];0==l?d[l]="object"==typeof p?p.value:p:(d[l]={v:"object"==typeof p?p.value:p},r&&(d[l].f=o.money(d[l].v,!0)))}i.push(d)}return t.colors=n.colors,a.addRows(i),a},c=function(){function e(e){var t=this;t.options=e||{},t.props={},t.data={},t.chartId=n.allocID(),t._defineProps()}return e.prototype._defineProps=function(){var e=this,t=n.defineProperty;t("data",e),t("config",e)},e.prototype._notifyChange=function(e){var t=this;switch(e){case"data":t.renderChart()}},e.prototype._onresize=function(){this._internalRenderChart()},e.prototype._setEvents=function(){var e=this;e.$element&&$(window).on("resize."+e.chartId,function(){e.canResize&&(clearTimeout(e.doResize),e.doResize=setTimeout(e._onresize.bind(e),100))})},e.prototype._removeEvents=function(){var e=this;e.$element&&$(window).off("resize."+e.chartId)},e.prototype._getConfig=function(){var e=this.data.config||{};return e.width=(e.width||"100%")+"",e.height=(e.height||"400px")+"",(e.height.indexOf("px")<0||e.height.indexOf("%")<0)&&(e.height=e.height+"px"),e},e.prototype._append=function(e){var t=this;e&&(t.options.beforeAdd&&t.options.beforeAdd(t.$element),t.options.replaceParent?e.replaceWith(t.$element):e.append(t.$element))},e.prototype.renderChart=function(){var e=this;e.$element&&(e.rto||(e.rto=window.setTimeout(function(){e.rto=null,e._internalRenderChart()},0)))},e.prototype._internalRenderChart=function(){var e=this,t=e.data.config||{};t.valueType=t.valueType||"money",t.colors=t.colors||["#f03558","#fad32d","#45cebd","#f99f46","#6A5ACD","#A0522D","#000000","#696969"],t.colors=["#f03558","#fad32d","#45cebd","#f99f46","#6A5ACD","#A0522D","#000000","#696969"];var o,n,r=e.data.data,a={legend:{position:"top",alignment:"center",maxLines:2},tooltip:{showColorCode:!0,text:"value"},pieHole:0,vAxis:null,hAxis:null,bars:""};if(e.$element.empty(),r&&r.cols&&r.cols.length&&r.rows&&r.rows.length){switch(t.type){case"pie":n="PieChart",o=l(r,a,t);break;case"donut":n="PieChart",o=l(r,a,t),a.pieHole=.4;break;case"line":n="LineChart",a.hAxis={title:r.cols[0].label||""},a.vAxis={title:r.titles.valuesTitle||""},o=s(r,a,t);break;case"area":n="AreaChart",a.hAxis={title:r.cols[0].label||""},a.vAxis={title:r.titles.valuesTitle||""},o=s(r,a,t);break;case"bar":n="BarChart",a.hAxis={title:r.titles.valuesTitle||""},a.vAxis={title:r.cols[0].label||""},a.bars="horizontal",o=s(r,a,t);break;case"column":n="ColumnChart",a.hAxis={title:r.cols[0].label||""},a.vAxis={title:r.titles.valuesTitle||""},o=s(r,a,t);break;case"columnrange":if(n="Timeline",2!=r.rows.length)return null;o=i(r,a,t);break;default:return null}("Bar"==n?new window.google.charts.Bar(e.$element.get(0)):new window.google.visualization[n](e.$element.get(0))).draw(o,a),e.canResize=!0}},e.prototype.render=function(e){var t=this;t.$element?t._append(e):r.loadScript("jsapi","https://www.google.com/jsapi",function(o){if(!o){var a={execute:function(e){window.google.load("visualization","1",{packages:["corechart","timeline"],callback:e})}};r.loadScript("gvisualization","",function(o){var r=t._getConfig();t.$element=$(n.format('<div id="{0}" class="" style="width:{1};height:{2}"></div>',t.chartId,r.width,r.height)),t._append(e),t.renderChart(),t._setEvents()},a)}},null)},e.prototype.destroy=function(){var e=this;e._removeEvents(),e.$element=null,e.options=null},e}();t.GoogleChart=c,a.register("javascript","widget.content.control.googlechart",c)}(e.ui||(e.ui={}))}(Phoenix||(Phoenix={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Phoenix;!function(e){!function(e){var t=function(){function e(e,t){var o=this;o.options=e||{},o.callback=t||null,o.map=null,o.markerList=[]}return e.prototype.newMap=function(){return new e},e.prototype.getLatLng=function(e,t){},e.prototype.initMap=function(e,t){},e.prototype.setMapCenter=function(e,t,o,n){},e.prototype.addMarker=function(e,t,o,n,r){},e.prototype.removeMarker=function(e){},e.prototype.addMarkerByAddress=function(e){},e.prototype.addMarkerByLongLat=function(e,t,o){var n=this;if(!e||!t)return n.callback&&n.callback(null);if(n.map){n.markerList[0]&&n.removeMarker(n.markerList[0]),n.setMapCenter(n.map,t,e);var r="<b>Adresse :</b><br />"+(o||"longitude : "+e+", latitude : "+t);n.addMarker(n.map,t,e,{message:r})}n.callback&&n.callback({longitude:e,latitude:t,libelle:o})},e}(),o=window.google,n=function(e){function t(t,o){return e.call(this,t,o)||this}return __extends(t,e),t.prototype.getLatLng=function(e,t){function n(o){o?t(o):i==e.length-1?t(null):r(e[++i],n)}function r(e,t){a.geocode({address:e},function(n,r){if(r===o.maps.GeocoderStatus.OK)return t({latitude:n[0].geometry.location.lat(),longitude:n[0].geometry.location.lng(),libelle:e});t(null)})}var a=new o.maps.Geocoder;if(a){Array.isArray(e)||(e=[e]);var i=0;r(e[0],n)}},t.prototype.initMap=function(e,t){var n=this;if(e)return t=t||{},t={zoom:t.zoom||16,mapTypeId:t.type||o.maps.MapTypeId.TERRAIN,scrollwheel:!1},n.map=new o.maps.Map(e,t)},t.prototype.setMapCenter=function(e,t,n,r){if(e){var a=new o.maps.LatLng(t,n);e.setCenter(a)}},t.prototype.addMarker=function(e,t,n,r){var a=this;if(e){r=r||{};var i=new o.maps.LatLng(t,n),l=new o.maps.Marker({position:i,map:e,title:r.message||null});if(r.message){var s=new o.maps.InfoWindow({content:r.message,size:new o.maps.Size(100,100)});o.maps.event.addListener(l,"click",function(){s.open(e,l)})}return a.markerList[0]?a.markerList[0]=l:a.markerList.push(l),l}},t.prototype.removeMarker=function(e){e&&e.setMap(null)},t.prototype.addMarkerByAddress=function(e){var t=this;t.getLatLng(e,function(e){if(!e)return t.callback&&t.callback(null);t.map&&(t.markerList[0]&&t.removeMarker(t.markerList[0]),t.setMapCenter(t.map,e.latitude,e.longitude),t.addMarker(t.map,e.latitude,e.longitude,{message:"<b>Adresse :</b><br />"+e.libelle})),t.callback&&t.callback(e)})},t}(t),r=function(e,t){return o=window.google,new n(e,t)},a=window.L,i=function(e){function t(t,o){return e.call(this,t,o)||this}return __extends(t,e),t.prototype.getLatLng=function(e,t){function n(o){o?t(o):i==e.length-1?t(null):r(e[++i],n)}function r(e,t){a.geocode({address:e},function(n,r){if(r===o.maps.GeocoderStatus.OK)return t({latitude:n[0].geometry.location.lat(),longitude:n[0].geometry.location.lng(),libelle:e});t(null)})}var a=new o.maps.Geocoder;if(a){Array.isArray(e)||(e=[e]);var i=0;r(e[0],n)}},t.prototype.initMap=function(e,t){var o=this;if(e){t=t||{};var n=a.map(e,{center:[0,0],zoom:t.zoom||16});return a.tileLayer(t.tile||"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:t.maxZoom||18,attribution:t.attribution||'&copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors',id:t.id||"mapbox.streets"}).addTo(n),o.map=n}},t.prototype.setMapCenter=function(e,t,o,n){if(e){var r=a.latLng(t,o);e.setView(r)}},t.prototype.addMarker=function(e,t,o,n){var r=this;if(e){n=n||{};var i=a.marker([t,o]).addTo(e);return n.message&&i.bindPopup(n.message),r.markerList[0]?r.markerList[0]=i:r.markerList.push(i),i}},t.prototype.removeMarker=function(e){var t=this;e&&t.map&&(e.closePopup(),t.map.removeLayer(e))},t.prototype.addMarkerByAddress=function(e){var t=this;t.getLatLng(e,function(e){if(!e)return t.callback&&t.callback(null);t.map&&(t.markerList[0]&&t.removeMarker(t.markerList[0]),t.setMapCenter(t.map,e.latitude,e.longitude),t.addMarker(t.map,e.latitude,e.longitude,{message:"<b>Adresse :</b><br />"+e.libelle})),t.callback&&t.callback(e)})},t}(t),l=function(e,t){return o=window.google,a=window.L,new i(e,t)};e.createMapService=function(e,t){var o=(e=e||{}).type||"omap";delete e.type;var n=null;switch(o){case"gmap":n=r(e,t);break;default:n=l(e,t)}return n}}(e.ui||(e.ui={}))}(Phoenix||(Phoenix={}));var Phoenix;!function(e){!function(t){var o=e.WidgetUtils,n=e.utils,r=function(){function e(e,t){var o=this;o._options=e||{},o._options.id=o._options.id||n.allocID(),o._data=t||{}}return e.prototype.render=function(e){var t=this;if(!t.$element){var n=[];o.widgetTitle(n,t._options.id,t._data,null,!0),t.$element=$(n.join(""))}e&&(t._options.replaceParent?e.replaceWith(t.$element):e.append(t.$element))},e.prototype.destroy=function(){var e=this;e.$element=null,e._options=null,e._data=null},e}();t.ModuleTitle=r}(e.ui||(e.ui={}))}(Phoenix||(Phoenix={}));var Phoenix;!function(e){!function(t){e.utils;var o=e.render,n=function(){function e(e,t){this.data=e||{},this.options=t||{}}return e.prototype.render=function(e){var t=this;return t.$element||(t.$element=$("<div></div>")),e&&(t.options.beforeAdd&&t.options.beforeAdd(t.$element),t.options.replaceParent?e.replaceWith(t.$element):e.append(t.$element)),t.$element},e.prototype.destroy=function(){this.$element=null},e}();o.register("javascript","widget.content.control.test",n)}(e.ui||(e.ui={}))}(Phoenix||(Phoenix={}));
//# sourceMappingURL=phoenix.widgets.min.js.map