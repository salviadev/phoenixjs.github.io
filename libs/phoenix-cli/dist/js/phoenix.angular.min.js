angular&&angular.module("phoenix.ui",[]);
//# sourceMappingURL=angular.core.js.map
var Phoenix;!function(a){function b(a){if("string"==typeof a)return a;var b=a.message;return"error"===b&&a.detail&&a.detail.responseText&&(b=a.detail.responseText),b}function c(a){a.component.saveHandler=function(c){var d=e.config(e.name);d&&d.current&&d.current.pages&&d.current.forms&&g.put((a.isform?d.current.forms:d.current.pages)+"/"+c.name,c).then(function(a){},function(a){alert(b(a))})},a.component.loadNestedHandler=function(c,d){var f=e.config(e.name);f&&f.current&&f.current.pages&&f.current.forms&&g.post((a.isform?f.current.forms:f.current.pages)+"/load/nested",c).then(function(a){d&&d(a)},function(a){alert(b(a))})},a.component.createHandler=function(c,f){var j=e.config(e.name);if(j&&j.current&&j.current.pages&&j.current.forms){f.name=c;var k=function(a){var b=h.context(),c={$page:a.name,$authoring:!0};h.execLink(c,b,null)},l=function(c){"Conflict"==c?d.prompt(i.layouts.design.ConflictedPageName,f.name,function(b){if(b&&(b=b.trim())){if(b.indexOf(" ")>=0)return void alert(i.layouts.design.InvalidPageName);f.name=b,g.post((a.isform?j.current.forms:j.current.pages)+"/"+f.name,f).then(k,l)}}):alert(b(c))};g.post((a.isform?j.current.forms:j.current.pages)+"/"+f.name,f).then(k,l)}},a.component.openHandler=function(a){var b=h.context(),c={$page:a,$authoring:!0};h.execLink(c,b,null)},a.component.removeHandler=function(c){var d=e.config(e.name);d&&d.current&&d.current.pages&&d.current.forms&&g.remove((a.isform?d.current.forms:d.current.pages)+"/"+c).then(function(a){var b=h.context(),c={$page:"home"};h.execLink(c,b,null)},function(a){alert(b(a))})},a.component.listHandler=function(c){var d=e.config(e.name);d&&d.current&&d.current.pages&&d.current.forms&&g.get(a.isform?d.current.forms:d.current.pages).then(function(a){c(a)},function(a){alert(b(a))})}}if(angular){var d=a.utils,e=a.application,f=a.ui,g=a.ajax,h=a.link,i=a.locale,j=a.serial,k=angular.module("phoenix.ui");k.controller("uiLayoutController",["$scope",function(a){}]),k.directive("layout",["$compile",function(a){return{scope:{model:"=",isform:"=",authoring:"=",locale:"=",prototype:"=",path:"="},bindToController:!0,restrict:"E",replace:!0,controller:"uiLayoutController",controllerAs:"layout",link:function(b,e,g){var h=b.$new();b.$on("$destroy",function(){d.log("destroy layout","scope"),b.component.destroy(),b.component=null}),b.isform=!!b.layout.isform;var i={design:h.layout.authoring,path:h.layout.path,replaceParent:!0,context:"angular",beforeAdd:function(c,e){d.log("compile layout","scope"),a(c)(h),e&&j.GlbSerial.execute(function(){b.$digest()})},beforeRemove:function(a){d.log("remove layout","scope"),h.component=null,h.layout=null,h.$destroy(),h=b.$new()}};b.isform?f.OpenForm(e,b.layout.model,b.layout.prototype,{},b.layout.locale&&b.layout.locale.$view?b.layout.locale.$view:b.layout.locale,null,i,function(a){b.component=a,c(b)}):(b.component=new f.LayoutClass(b.layout.model||{},i,{},b.layout.prototype,b.layout.locale&&b.layout.locale.$view?b.layout.locale.$view:b.layout.locale,null),c(b),b.component.render(e))}}}])}}(Phoenix||(Phoenix={}));
//# sourceMappingURL=angular.layout.js.map
var Phoenix;!function(a){if(angular){var b=a.utils,c=a.render,d=a.device,e=a.serial,f=a.ui,g=angular.module("phoenix.ui");g.controller("uiWidgetController",["$scope",function(a){}]),g.directive("widget",["$compile",function(a){return{scope:{data:"=",layout:"=",authoring:"="},bindToController:!0,restrict:"E",replace:!0,controller:"uiWidgetController",controllerAs:"item",compile:function(c,d){return{pre:function(c,d,g){var h=c.item.data||{};c.component=new f.Widget(h,{design:c.item.authoring,replaceParent:!0,context:"angular",beforeAdd:function(d,f){b.log("compile module","scope"),a(d)(c),f&&e.GlbSerial.execute(function(){c.$digest()})},onDataChanged:function(){e.GlbSerial.execute(function(){c.$digest()})}},c.item.layout),c.component.render(d),c.$on("$destroy",function(){b.log("destroy module","scope"),c.component&&c.component.destroy()})},post:function(a,b,c){}}}}}]);var h=function(a,b,c,d,e){a.push('<widget authoring="'+(e.design?"true":"false")+'" layout=component data=layout.model.fields.'+b.$id+"></widget>")},i=function(a,b,c){a.push("<widget-"+b.$type),a.push(' authoring="'+(c.design?"true":"false")+'"'),a.push(' phone="'+(d.phone?"true":"false")+'"'),a.push(' tablet="'+(d.tablet?"true":"false")+'"'),a.push(" module=component props=component.props links=component.links data=component.props.data.ds></widget-"+b.$type+">")};c.register("angular","widget.content",i),c.register("angular","widget",h)}}(Phoenix||(Phoenix={}));
//# sourceMappingURL=angular.module.js.map
var Phoenix;!function(a){if(angular){var b=a,c=angular.module("phoenix.ui");c.controller("uiAuthoringController",["$scope",function(a){}]),c.directive("authoring",[function(){return{scope:{config:"=",isform:"="},bindToController:!0,restrict:"E",replace:!0,controller:"uiAuthoringController",controllerAs:"item",link:function(a,c,d){var e=b.authoring;e&&(a.component=new e.AuthoringEditor({form:!!a.isform,design:!0,replaceParent:!0,context:"angular"},a.item.config),a.component.render(c),a.$on("$destroy",function(){a.component&&a.component.destroy()}))}}}])}}(Phoenix||(Phoenix={}));
//# sourceMappingURL=phoenix.angular.min.js.map